"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1018],{81018:(i,r,o)=>{var a,c;a=[o(7927)],c=function(h){const s={};s.init=function(){Promise.all([o.e(2441),o.e(4074),o.e(3216),o.e(524),o.e(8596)]).then(function(){var t=[o(30524)];(function(e){$('[component="chat/recent"]').on("click",'[component="chat/recent/room"]',function(){e.switchChat($(this).attr("data-roomid"))}),$('[component="chat/recent"]').on("scroll",function(){const n=$(this),d=(n[0].scrollHeight-n.height())*.9;n.scrollTop()>d&&f()})}).apply(null,t)}).catch(o.oe)};function f(){const t=$('[component="chat/recent"]');t.attr("loading")||(t.attr("loading",1),socket.emit("modules.chats.getRecentChats",{uid:ajaxify.data.uid,after:t.attr("data-nextstart")},function(e,n){if(e)return h.error(e);n&&n.rooms.length?l(n,function(){t.removeAttr("loading"),t.attr("data-nextstart",n.nextStart)}):t.removeAttr("loading")}))}function l(t,e){if(!t.rooms.length)return e();app.parseAndTranslate("chats","rooms",t,function(n){$('[component="chat/recent"]').append(n),n.find(".timeago").timeago(),e()})}return s}.apply(r,a),c!==void 0&&(i.exports=c)}}]);
