"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[5253],{55253:(b,k,d)=>{var f,c;f=[d(3547),d(7927),d(74344)],c=function(i,t,p){const r={};let n,s,a,m;r.init=function(){m=ajaxify.data.tid,$(window).off("action:ajaxify.end",o).on("action:ajaxify.end",o),!n&&app.parseAndTranslate("partials/delete_posts_modal",{},function(g){n=g,$("body").append(n),s=n.find("#delete_posts_confirm"),a=n.find("#purge_posts_confirm"),n.find(".close,#delete_posts_cancel").on("click",u),i.init(function(){A(),l()}),l(),s.on("click",function(){e(s,_=>`/posts/${_}/state`)}),a.on("click",function(){e(a,_=>`/posts/${_}`)})})};function o(){(ajaxify.data.template.name!=="topic"||ajaxify.data.tid!==m)&&(u(),$(window).off("action:ajaxify.end",o))}function e(g,_){g.attr("disabled",!0),Promise.all(i.pids.map(E=>p.delete(_(E),{}))).then(u).catch(t.error).finally(()=>{g.removeAttr("disabled")})}function l(){i.pids.length?n.find("#pids").translateHtml("[[topic:fork_pid_count, "+i.pids.length+"]]"):n.find("#pids").translateHtml("[[topic:fork_no_pids]]")}function A(){i.pids.length?(s.removeAttr("disabled"),a.removeAttr("disabled")):(s.attr("disabled",!0),a.attr("disabled",!0))}function u(){n&&(n.remove(),n=null,i.disable())}return r}.apply(k,f),c!==void 0&&(b.exports=c)},3547:(b,k,d)=>{var f,c;f=[d(7237)],c=function(i){const t={};let p;t.pids=[];let r=!1;t.init=function(o,e){t.pids.length=0,p=o,e=e||{},r=e.allowMainPostSelect||!1,$("#content").on("click",'[component="topic"] [component="post"]',n),a()};function n(o){o.stopPropagation();const e=$(this).attr("data-pid"),l=$('[component="topic"] [data-pid="'+e+'"]');!r&&parseInt($(this).attr("data-index"),10)===0||t.togglePostSelection(l,e)}t.disable=function(){t.pids.forEach(function(o){i.get("post","pid",o).toggleClass("bg-success",!1)}),$("#content").off("click",'[component="topic"] [component="post"]',n),m()},t.togglePostSelection=function(o,e){if(e){const l=t.pids.indexOf(e);l===-1?(t.pids.push(e),o.toggleClass("bg-success",!0)):(t.pids.splice(l,1),o.toggleClass("bg-success",!1)),t.pids.length&&t.pids.sort(function(A,u){return A-u}),typeof p=="function"&&p()}};function s(){return!1}function a(){$("#content").on("click",'[component="post"] button, [component="post"] a',s)}function m(){$("#content").off("click",'[component="post"] button, [component="post"] a',s)}return t}.apply(k,f),c!==void 0&&(b.exports=c)}}]);
