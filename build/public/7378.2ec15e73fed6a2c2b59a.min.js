"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[7378],{57378:(p,h,f)=>{var m,r;m=[f(50548),f(7927),f(85233)],r=function(C,u,s){const e={};let t,c;e.init=function(n,a,d){e.tids=n,e.currentCid=a,e.onComplete=d,e.moveAll=!n,i()};function i(){app.parseAndTranslate("partials/move_thread_modal",{},function(n){t=n,t.on("hidden.bs.modal",function(){t.remove()}),t.find("#move-confirm").addClass("hide"),(e.moveAll||e.tids&&e.tids.length>1)&&t.find(".modal-header h3").translateText("[[topic:move_topics]]"),C.init(t.find('[component="category-selector"]'),{onSelect:o,privilege:"moderate"}),t.find("#move_thread_commit").on("click",g),t.modal("show")})}function o(n){c=n,t.find("#move_thread_commit").prop("disabled",!1)}function g(){const n=t.find("#move_thread_commit");if(!n.prop("disabled")&&c&&c.cid){n.prop("disabled",!0),t.modal("hide");let a="[[topic:topic_move_success, "+c.name+"]]";e.tids&&e.tids.length>1?a="[[topic:topic_move_multiple_success, "+c.name+"]]":e.tids||(a="[[topic:topic_move_all_success, "+c.name+"]]");const d={tids:e.tids?e.tids.slice():null,cid:c.cid,currentCid:e.currentCid,onComplete:e.onComplete};if(config.undoTimeout>0)return u.alert({alert_id:"tids_move_"+(e.tids?e.tids.join("-"):"all"),title:"[[topic:thread_tools.move]]",message:a,type:"success",timeout:config.undoTimeout,timeoutfn:function(){l(d)},clickfn:function(y,_){delete _.timeoutfn,u.success("[[topic:topic_move_undone]]")}});l(d)}}function l(n){s.fire("action:topic.move",n),socket.emit(n.tids?"topics.move":"topics.moveAll",n,function(a){if(a)return u.error(a);typeof n.onComplete=="function"&&n.onComplete()})}return e}.apply(h,m),r!==void 0&&(p.exports=r)},22905:(p,h,f)=>{var m,r;m=[f(7927)],r=function(C){const u={};return u.init=function(s,e){let t=null;e=e||{},e.privilege=e.privilege||"topics:read",e.states=e.states||["watching","notwatching","ignoring"];let c=[];Array.isArray(e.localCategories)&&(c=e.localCategories.map(n=>({...n}))),e.selectedCids=e.selectedCids||ajaxify.data.selectedCids||[];const i=s.find('[component="category-selector-search"]');if(!i.length)return;const o=i.parent('[component="category/dropdown"]').length>0||i.parent('[component="category-selector"]').length>0;s.on("show.bs.dropdown",function(){o&&(s.find(".dropdown-toggle").addClass("hidden"),i.removeClass("hidden"));function n(){const a=i.find("input").val();a.length>1||!a&&!t?g(a,function(d){t=t||d,l(d)}):!a&&t&&(t.forEach(function(d){d.selected=e.selectedCids.includes(d.cid)}),l(t))}i.on("click",function(a){a.preventDefault(),a.stopPropagation()}),i.find("input").val("").on("keyup",utils.debounce(n,300)),n()}),s.on("shown.bs.dropdown",function(){i.find("input").focus()}),s.on("hide.bs.dropdown",function(){o&&(s.find(".dropdown-toggle").removeClass("hidden"),i.addClass("hidden")),i.off("click"),i.find("input").off("keyup")});function g(n,a){socket.emit("categories.categorySearch",{search:n,query:utils.params(),parentCid:e.parentCid||0,selectedCids:e.selectedCids,privilege:e.privilege,states:e.states,showLinks:e.showLinks},function(d,y){if(d)return C.error(d);a(c.concat(y))})}function l(n){app.parseAndTranslate(e.template,{categoryItems:n.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(a){s.find('[component="category/list"]').replaceWith(a.find('[component="category/list"]')),s.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!n.length)})}},u}.apply(h,m),r!==void 0&&(p.exports=r)},50548:(p,h,f)=>{var m,r;m=[f(22905),f(31369),f(85233)],r=function(C,u,s){const e={};return e.init=function(t,c){if(!t||!t.length)return;c=c||{};const i=c.onSelect||function(){};c.states=c.states||["watching","notwatching","ignoring"],c.template="partials/category-selector",s.fire("action:category.selector.options",{el:t,options:c}),C.init(t,c);const o={el:t,selectedCategory:null};t.on("click","[data-cid]",function(){const l=$(this);if(l.hasClass("disabled"))return!1;o.selectCategory(l.attr("data-cid")),i(o.selectedCategory)});const g=o.el.find('[component="category-selector-selected"]').html();return o.selectCategory=function(l){const n=o.el.find('[data-cid="'+l+'"]');o.selectedCategory={cid:l,name:n.attr("data-name")},n.length?o.el.find('[component="category-selector-selected"]').html(n.find('[component="category-markup"]').html()):o.el.find('[component="category-selector-selected"]').html(g)},o.getSelectedCategory=function(){return o.selectedCategory},o.getSelectedCid=function(){return o.selectedCategory?o.selectedCategory.cid:0},o},e.modal=function(t){t=t||{},t.onSelect=t.onSelect||function(){},t.onSubmit=t.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:t.message},function(c){const i=u.dialog({title:t.title||"[[modules:composer.select_category]]",message:c,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:g}}}),o=e.init(i.find('[component="category-selector"]'),t);function g(l){return l.preventDefault(),o.selectedCategory&&(t.onSubmit(o.selectedCategory),i.modal("hide")),!1}t.openOnLoad&&i.on("shown.bs.modal",function(){i.find(".dropdown-toggle").dropdown("toggle")}),i.find("form").on("submit",g)})},e}.apply(h,m),r!==void 0&&(p.exports=r)}}]);
