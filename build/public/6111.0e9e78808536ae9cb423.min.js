"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[6111,6193],{6111:(h,b,m)=>{var g,r;g=[m(3547),m(86193),m(7927)],r=function(p,o,l){const _={};let i,s,t=0;_.init=function(u){i||app.parseAndTranslate("partials/change_owner_modal",{},function(f){i=f,s=i.find("#change_owner_commit"),$("body").append(i),i.find(".close,#change_owner_cancel").on("click",d),i.find("#username").on("keyup",e),p.init(n,{allowMainPostSelect:!0}),a(),u&&p.togglePostSelection(u,u.attr("data-pid")),s.on("click",function(){c()}),o.user(i.find("#username"),{filters:["notbanned"]},function(y,E){t=E.item.user.uid,e()})})};function a(){p.pids.length?i.find("#pids").translateHtml("[[topic:fork_pid_count, "+p.pids.length+"]]"):i.find("#pids").translateHtml("[[topic:fork_no_pids]]")}function e(){t&&i.find("#username").length&&i.find("#username").val().length&&p.pids.length?s.removeAttr("disabled"):s.attr("disabled",!0)}function n(){e(),a()}function c(){t&&socket.emit("posts.changeOwner",{pids:p.pids,toUid:t},function(u){if(u)return l.error(u);ajaxify.refresh(),d()})}function d(){i&&(i.remove(),i=null,p.disable())}return _}.apply(b,g),r!==void 0&&(h.exports=r)},86193:(h,b,m)=>{var g,r;g=[m(74344),m(7927)],r=function(p,o){const l={},_={delay:200};l.init=s=>{const{input:t,source:a,onSelect:e,delay:n}={..._,...s};app.loadJQueryUI(function(){t.autocomplete({delay:n,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(c,d){i(t,e,c,d)},source:a})})},l.user=function(s,t,a){typeof t=="function"&&(a=t,t={}),t=t||{},l.init({input:s,onSelect:a,source:(e,n)=>{t.query=e.term,p.get("/api/users",t,function(c,d){if(c)return o.error(c);if(d&&d.users){const u=d.users.map(function(f){const y=$("<div></div>").html(f.username).text();return f&&{label:y,value:y,user:{uid:f.uid,name:f.username,slug:f.userslug,username:f.username,userslug:f.userslug,picture:f.picture,banned:f.banned,"icon:text":f["icon:text"],"icon:bgColor":f["icon:bgColor"]}}});n(u)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},l.group=function(s,t){l.init({input:s,onSelect:t,source:(a,e)=>{socket.emit("groups.search",{query:a.term},function(n,c){if(n)return o.error(n);if(c&&c.length){const d=c.map(function(u){return u&&{label:u.name,value:u.name,group:u}});e(d)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},l.tag=function(s,t){l.init({input:s,onSelect:t,delay:100,source:(a,e)=>{socket.emit("topics.autocompleteTags",{query:a.term,cid:ajaxify.data.cid||0},function(n,c){if(n)return o.error(n);c&&e(c),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function i(s,t,a,e){t=t||function(){};const n=jQuery.Event("keypress");n.which=13,n.keyCode=13,setTimeout(function(){s.trigger(n)},100),t(a,e)}return l}.apply(b,g),r!==void 0&&(h.exports=r)},3547:(h,b,m)=>{var g,r;g=[m(7237)],r=function(p){const o={};let l;o.pids=[];let _=!1;o.init=function(e,n){o.pids.length=0,l=e,n=n||{},_=n.allowMainPostSelect||!1,$("#content").on("click",'[component="topic"] [component="post"]',i),t()};function i(e){e.stopPropagation();const n=$(this).attr("data-pid"),c=$('[component="topic"] [data-pid="'+n+'"]');!_&&parseInt($(this).attr("data-index"),10)===0||o.togglePostSelection(c,n)}o.disable=function(){o.pids.forEach(function(e){p.get("post","pid",e).toggleClass("bg-success",!1)}),$("#content").off("click",'[component="topic"] [component="post"]',i),a()},o.togglePostSelection=function(e,n){if(n){const c=o.pids.indexOf(n);c===-1?(o.pids.push(n),e.toggleClass("bg-success",!0)):(o.pids.splice(c,1),e.toggleClass("bg-success",!1)),o.pids.length&&o.pids.sort(function(d,u){return d-u}),typeof l=="function"&&l()}};function s(){return!1}function t(){$("#content").on("click",'[component="post"] button, [component="post"] a',s)}function a(){$("#content").off("click",'[component="post"] button, [component="post"] a',s)}return o}.apply(b,g),r!==void 0&&(h.exports=r)}}]);
