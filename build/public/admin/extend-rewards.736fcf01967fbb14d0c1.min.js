"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[2249,7214,6503,8786,5655],{48842:(g,v,h)=>{var m,r;m=[h(7927)],r=function(e){const s={};let u,p,y,b;s.init=function(){u=ajaxify.data.rewards,p=ajaxify.data.active,y=ajaxify.data.conditions,b=ajaxify.data.conditionals,$("[data-selected]").each(function(){_($(this))}),$("#active").on("change","[data-selected]",function(){k($(this))}).on("click",".delete",function(){const n=$(this).parents("[data-id]"),a=n.attr("data-id");return socket.emit("admin.rewards.delete",{id:a},function(c){c?e.error(c):e.success("[[admin/extend/rewards:alert.delete-success]]")}),n.remove(),!1}).on("click",".toggle",function(){const n=$(this),a=n.hasClass("btn-success");return n.toggleClass("btn-warning").toggleClass("btn-success").translateHtml("[[admin/extend/rewards:"+(a?"disable":"enable")+"]]"),!1}),$("#new").on("click",i),$("#save").on("click",w),o()};function _(n){switch(n.val(n.attr("data-selected")),n.attr("name")){case"rid":t(n);break}}function k(n){switch(n.attr("data-selected",n.val()),n.attr("name")){case"rid":t(n);break}}function t(n){const a=n.parents("[data-rid]"),c=a.find(".inputs");let l,d="";for(const f in u)if(u.hasOwnProperty(f)&&u[f].rid===n.attr("data-selected")){l=u[f].inputs,a.attr("data-rid",u[f].rid);break}if(!l)return e.error("[[admin/extend/rewards:alert.no-inputs-found]] "+n.attr("data-selected"));l.forEach(function(f){switch(d+='<label for="'+f.name+'">'+f.label+"<br />",f.type){case"select":d+='<select class="form-control" name="'+f.name+'">',f.values.forEach(function(E){d+='<option value="'+E.value+'">'+E.name+"</option>"});break;case"text":d+='<input type="text" class="form-control" name="'+f.name+'" />';break}d+="</label><br />"}),c.html(d)}function o(){$("[data-rid]").each(function(n){const a=$(this).find(".inputs"),c=p[n].rewards;for(const l in c)c.hasOwnProperty(l)&&a.find('[name="'+l+'"]').val(c[l])})}function i(){const n=$("#active"),a={active:[{disabled:!0,value:"",claimable:1,rid:null,id:null}],conditions:y,conditionals:b,rewards:u};app.parseAndTranslate("admin/extend/rewards","active",a,function(c){n.append(c),c.find("select").val("")})}function w(){const n=[];$("#active li").each(function(){const a={rewards:{}},c=$(this).find("form.main").serializeArray(),l=$(this).find("form.rewards").serializeArray();c.forEach(function(d){a[d.name]=d.value}),l.forEach(function(d){a.rewards[d.name]=d.value}),a.id=$(this).attr("data-id"),a.disabled=$(this).find(".toggle").hasClass("btn-success"),n.push(a)}),socket.emit("admin.rewards.save",n,function(a,c){a?e.error(a):(e.success("[[admin/extend/rewards:alert.save-success]]"),$("#active li").each(function(l){$(this).attr("data-id")||$(this).attr("data-id",c[l].id)}))})}return s}.apply(v,m),r!==void 0&&(g.exports=r)},7927:(g,v,h)=>{var m,r;m=[h(32230),h(7237),h(85233)],r=function(e,s,u){const p={};p.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const o=$("#"+t.alert_id);o.length?b(o,t):y(t)},p.success=function(t,o){p.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:o||5e3})},p.error=function(t,o){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}p.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:o||1e4})},p.remove=function(t){$("#alert_button_"+t).remove()};function y(t){app.parseAndTranslate("alert",t,function(o){let i=$("#"+t.alert_id);if(i.length)return b(i,t);i=o,i.fadeIn(200),s.get("toaster/tray").prepend(i),typeof t.closefn=="function"&&i.find("button").on("click",function(){return t.closefn(),_(i),!1}),t.timeout&&k(i,t),typeof t.clickfn=="function"&&i.addClass("pointer").on("click",function(w){$(w.target).is(".close")||t.clickfn(i,t),_(i)}),u.fire("action:alert.new",{alert:i,params:t})})}function b(t,o){t.find("strong").translateHtml(o.title),t.find("p").translateHtml(o.message),t.attr("class","alert alert-dismissable alert-"+o.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),o.timeout&&k(t,o),u.fire("action:alert.update",{alert:t,params:o}),t.off("click").removeClass("pointer"),typeof o.clickfn=="function"&&t.addClass("pointer").on("click",function(i){$(i.target).is(".close")||o.clickfn(),_(t)})}function _(t){t.fadeOut(500,function(){$(this).remove()})}function k(t,o){const i=o.timeout,w=setTimeout(function(){_(t),typeof o.timeoutfn=="function"&&o.timeoutfn(t,o)},i);t.attr("timeoutId",w),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(i+450)+"ms linear, background-color "+(i+450)+"ms ease-in"),t.addClass("animate"),u.fire("action:alert.animate",{alert:t,params:o})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return p}.apply(v,m),r!==void 0&&(g.exports=r)},7237:(g,v,h)=>{var m;m=function(){const r={};return r.core={"topic/teaser":function(e){return e?$('[component="category/topic"][data-tid="'+e+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(e,s){return $('[component="topic"][data-'+e+'="'+s+'"]')},post:function(e,s){return $('[component="post"][data-'+e+'="'+s+'"]')},"post/content":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/content"]')},"post/header":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/header"]')},"post/anchor":function(e){return $('[component="post"][data-index="'+e+'"] [component="post/anchor"]')},"post/vote-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/vote-count"]')},"post/bookmark-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/bookmark-count"]')},"user/postcount":function(e){return $('[component="user/postcount"][data-uid="'+e+'"]')},"user/reputation":function(e){return $('[component="user/reputation"][data-uid="'+e+'"]')},"category/topic":function(e,s){return $('[component="category/topic"][data-'+e+'="'+s+'"]')},"categories/category":function(e,s){return $('[component="categories/category"][data-'+e+'="'+s+'"]')},"chat/message":function(e){return $('[component="chat/message"][data-mid="'+e+'"]')},"chat/message/body":function(e){return $('[component="chat/message"][data-mid="'+e+'"] [component="chat/message/body"]')},"chat/recent/room":function(e){return $('[component="chat/recent/room"][data-roomid="'+e+'"]')}},r.get=function(){const e=Array.prototype.slice.call(arguments,1);return r.core[arguments[0]]&&e.length?r.core[arguments[0]].apply(this,e):$('[component="'+arguments[0]+'"]')},r}.call(v,h,v,g),m!==void 0&&(g.exports=m)}}]);
