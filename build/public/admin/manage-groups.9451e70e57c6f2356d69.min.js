"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[3130,7214,9617,6503,3014,6623,9286,8786,5655,999,831],{31433:(h,y,g)=>{var f,u;f=[g(50548),g(22568),g(74344),g(31369),g(7927)],u=function(o,d,p,i,t){const s={};s.init=function(){const e=$("#create-modal"),n=$("#create-group-name"),r=$("#create-modal-go"),a=$("#create-modal-error");l(),e.on("keypress",function(m){m.keyCode===13&&r.click()}),$("#create").on("click",function(){e.modal("show"),setTimeout(function(){n.focus()},250)}),r.on("click",function(){const m={name:n.val(),description:$("#create-group-desc").val(),private:$("#create-group-private").is(":checked")?1:0,hidden:$("#create-group-hidden").is(":checked")?1:0};p.post("/groups",m).then(_=>{a.addClass("hide"),n.val(""),e.on("hidden.bs.modal",function(){ajaxify.go("admin/manage/groups/"+_.name)}),e.modal("hide")}).catch(_=>{utils.hasLanguageKey(_.status.message)||(_.status.message="[[admin/manage/groups:alerts.create-failure]]"),a.translateHtml(_.status.message).removeClass("hide")})}),$(".groups-list").on("click","[data-action]",function(){const m=$(this),_=m.attr("data-action"),C=m.parents("tr[data-groupname]").attr("data-groupname");switch(_){case"delete":i.confirm("[[admin/manage/groups:alerts.confirm-delete]]",function(E){E&&p.del(`/groups/${d(C)}`,{}).then(ajaxify.refresh).catch(t.error)});break}}),c()};function c(){$('.groups-list [component="category-selector"]').each(function(){const e=$(this).parents("[data-name-encoded]").attr("data-name-encoded");o.init($(this),{onSelect:function(n){ajaxify.go("admin/manage/privileges/"+n.cid+"?group="+e)},showLinks:!0})})}function l(){const e=$("#group-search");function n(){if(!e.val())return ajaxify.refresh();$(".pagination").addClass("hide");const r=$(".groups-list");socket.emit("groups.search",{query:e.val(),options:{sort:"date"}},function(a,m){if(a)return t.error(a);app.parseAndTranslate("admin/manage/groups","groups",{groups:m,categories:ajaxify.data.categories},function(_){r.find("[data-groupname]").remove(),r.find("tbody").append(_),c()})})}e.on("keyup",utils.debounce(n,200))}return s}.apply(y,f),u!==void 0&&(h.exports=u)},7927:(h,y,g)=>{var f,u;f=[g(32230),g(7237),g(85233)],u=function(o,d,p){const i={};i.alert=function(e){e.alert_id="alert_button_"+(e.alert_id?e.alert_id:new Date().getTime()),e.title=e.title&&e.title.trim()||"",e.message=e.message?e.message.trim():"",e.type=e.type||"info";const n=$("#"+e.alert_id);n.length?s(n,e):t(e)},i.success=function(e,n){i.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:e,type:"success",timeout:n||5e3})},i.error=function(e,n){if(e=e&&e.message||e,e==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}i.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:e,type:"danger",timeout:n||1e4})},i.remove=function(e){$("#alert_button_"+e).remove()};function t(e){app.parseAndTranslate("alert",e,function(n){let r=$("#"+e.alert_id);if(r.length)return s(r,e);r=n,r.fadeIn(200),d.get("toaster/tray").prepend(r),typeof e.closefn=="function"&&r.find("button").on("click",function(){return e.closefn(),c(r),!1}),e.timeout&&l(r,e),typeof e.clickfn=="function"&&r.addClass("pointer").on("click",function(a){$(a.target).is(".close")||e.clickfn(r,e),c(r)}),p.fire("action:alert.new",{alert:r,params:e})})}function s(e,n){e.find("strong").translateHtml(n.title),e.find("p").translateHtml(n.message),e.attr("class","alert alert-dismissable alert-"+n.type+" clearfix"),clearTimeout(parseInt(e.attr("timeoutId"),10)),n.timeout&&l(e,n),p.fire("action:alert.update",{alert:e,params:n}),e.off("click").removeClass("pointer"),typeof n.clickfn=="function"&&e.addClass("pointer").on("click",function(r){$(r.target).is(".close")||n.clickfn(),c(e)})}function c(e){e.fadeOut(500,function(){$(this).remove()})}function l(e,n){const r=n.timeout,a=setTimeout(function(){c(e),typeof n.timeoutfn=="function"&&n.timeoutfn(e,n)},r);e.attr("timeoutId",a),e.css("transition-property","none"),e.removeClass("animate"),setTimeout(function(){e.css("transition-property",""),e.css("transition","width "+(r+450)+"ms linear, background-color "+(r+450)+"ms ease-in"),e.addClass("animate"),p.fire("action:alert.animate",{alert:e,params:n})},50),e.on("mouseenter",function(){$(this).css("transition-duration",0)})}return i}.apply(y,f),u!==void 0&&(h.exports=u)},74344:(h,y,g)=>{var f,u;f=[g(85233)],u=(o=>{const d={},p=config.relative_path+"/api/v3";function i(t,s){t.url=t.url.startsWith("/api")?config.relative_path+t.url:p+t.url;async function c(l){({options:t}=await o.fire("filter:api.options",{options:t})),$.ajax(t).done(e=>{l(null,e&&e.hasOwnProperty("status")&&e.hasOwnProperty("response")?e.response:e||{})}).fail(e=>{let n;e.responseJSON&&(n=e.responseJSON.status&&e.responseJSON.status.message?e.responseJSON.status.message:e.responseJSON.error),l(new Error(n||e.statusText))})}if(typeof s=="function"){c(s);return}return new Promise((l,e)=>{c(function(n,r){n?e(n):l(r)})})}return d.get=(t,s,c)=>i({url:t+(s&&Object.keys(s).length?"?"+$.param(s):"")},c),d.head=(t,s,c)=>i({url:t+(s&&Object.keys(s).length?"?"+$.param(s):""),method:"head"},c),d.post=(t,s,c)=>i({url:t,method:"post",data:JSON.stringify(s||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},c),d.patch=(t,s,c)=>i({url:t,method:"patch",data:JSON.stringify(s||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},c),d.put=(t,s,c)=>i({url:t,method:"put",data:JSON.stringify(s||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},c),d.del=(t,s,c)=>i({url:t,method:"delete",data:JSON.stringify(s),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},c),d.delete=d.del,d}).apply(y,f),u!==void 0&&(h.exports=u)},22905:(h,y,g)=>{var f,u;f=[g(7927)],u=function(o){const d={};return d.init=function(p,i){let t=null;i=i||{},i.privilege=i.privilege||"topics:read",i.states=i.states||["watching","notwatching","ignoring"];let s=[];Array.isArray(i.localCategories)&&(s=i.localCategories.map(r=>({...r}))),i.selectedCids=i.selectedCids||ajaxify.data.selectedCids||[];const c=p.find('[component="category-selector-search"]');if(!c.length)return;const l=c.parent('[component="category/dropdown"]').length>0||c.parent('[component="category-selector"]').length>0;p.on("show.bs.dropdown",function(){l&&(p.find(".dropdown-toggle").addClass("hidden"),c.removeClass("hidden"));function r(){const a=c.find("input").val();a.length>1||!a&&!t?e(a,function(m){t=t||m,n(m)}):!a&&t&&(t.forEach(function(m){m.selected=i.selectedCids.includes(m.cid)}),n(t))}c.on("click",function(a){a.preventDefault(),a.stopPropagation()}),c.find("input").val("").on("keyup",utils.debounce(r,300)),r()}),p.on("shown.bs.dropdown",function(){c.find("input").focus()}),p.on("hide.bs.dropdown",function(){l&&(p.find(".dropdown-toggle").removeClass("hidden"),c.addClass("hidden")),c.off("click"),c.find("input").off("keyup")});function e(r,a){socket.emit("categories.categorySearch",{search:r,query:utils.params(),parentCid:i.parentCid||0,selectedCids:i.selectedCids,privilege:i.privilege,states:i.states,showLinks:i.showLinks},function(m,_){if(m)return o.error(m);a(s.concat(_))})}function n(r){app.parseAndTranslate(i.template,{categoryItems:r.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(a){p.find('[component="category/list"]').replaceWith(a.find('[component="category/list"]')),p.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!r.length)})}},d}.apply(y,f),u!==void 0&&(h.exports=u)},50548:(h,y,g)=>{var f,u;f=[g(22905),g(31369),g(85233)],u=function(o,d,p){const i={};return i.init=function(t,s){if(!t||!t.length)return;s=s||{};const c=s.onSelect||function(){};s.states=s.states||["watching","notwatching","ignoring"],s.template="partials/category-selector",p.fire("action:category.selector.options",{el:t,options:s}),o.init(t,s);const l={el:t,selectedCategory:null};t.on("click","[data-cid]",function(){const n=$(this);if(n.hasClass("disabled"))return!1;l.selectCategory(n.attr("data-cid")),c(l.selectedCategory)});const e=l.el.find('[component="category-selector-selected"]').html();return l.selectCategory=function(n){const r=l.el.find('[data-cid="'+n+'"]');l.selectedCategory={cid:n,name:r.attr("data-name")},r.length?l.el.find('[component="category-selector-selected"]').html(r.find('[component="category-markup"]').html()):l.el.find('[component="category-selector-selected"]').html(e)},l.getSelectedCategory=function(){return l.selectedCategory},l.getSelectedCid=function(){return l.selectedCategory?l.selectedCategory.cid:0},l},i.modal=function(t){t=t||{},t.onSelect=t.onSelect||function(){},t.onSubmit=t.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:t.message},function(s){const c=d.dialog({title:t.title||"[[modules:composer.select_category]]",message:s,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:e}}}),l=i.init(c.find('[component="category-selector"]'),t);function e(n){return n.preventDefault(),l.selectedCategory&&(t.onSubmit(l.selectedCategory),c.modal("hide")),!1}t.openOnLoad&&c.on("shown.bs.modal",function(){c.find(".dropdown-toggle").dropdown("toggle")}),c.find("form").on("submit",e)})},i}.apply(y,f),u!==void 0&&(h.exports=u)},7237:(h,y,g)=>{var f;f=function(){const u={};return u.core={"topic/teaser":function(o){return o?$('[component="category/topic"][data-tid="'+o+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(o,d){return $('[component="topic"][data-'+o+'="'+d+'"]')},post:function(o,d){return $('[component="post"][data-'+o+'="'+d+'"]')},"post/content":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/content"]')},"post/header":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/header"]')},"post/anchor":function(o){return $('[component="post"][data-index="'+o+'"] [component="post/anchor"]')},"post/vote-count":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/vote-count"]')},"post/bookmark-count":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/bookmark-count"]')},"user/postcount":function(o){return $('[component="user/postcount"][data-uid="'+o+'"]')},"user/reputation":function(o){return $('[component="user/reputation"][data-uid="'+o+'"]')},"category/topic":function(o,d){return $('[component="category/topic"][data-'+o+'="'+d+'"]')},"categories/category":function(o,d){return $('[component="categories/category"][data-'+o+'="'+d+'"]')},"chat/message":function(o){return $('[component="chat/message"][data-mid="'+o+'"]')},"chat/message/body":function(o){return $('[component="chat/message"][data-mid="'+o+'"] [component="chat/message/body"]')},"chat/recent/room":function(o){return $('[component="chat/recent/room"][data-roomid="'+o+'"]')}},u.get=function(){const o=Array.prototype.slice.call(arguments,1);return u.core[arguments[0]]&&o.length?u.core[arguments[0]].apply(this,o):$('[component="'+arguments[0]+'"]')},u}.call(y,g,y,h),f!==void 0&&(h.exports=f)},22568:(h,y,g)=>{var f,u,o;(function(d){u=[g(20648)],f=d,o=typeof f=="function"?f.apply(y,u):f,o!==void 0&&(h.exports=o)})(function(d){const p=d("[^\\p{L}\\s\\d\\-_]","g"),i=/[^\w\s\d\-_]/g,t=/^\s+|\s+$/g,s=/\s+/g,c=/-+/g,l=/-$/g,e=/^-/g,n=/^[\w\d\s.,\-@]+$/;return function(a,m){return a?(a=String(a).replace(t,""),n.test(a)?a=a.replace(i,"-"):a=d.replace(a,p,"-"),a=m?a:a.toLocaleLowerCase(),a=a.replace(s,"-"),a=a.replace(c,"-"),a=a.replace(l,""),a=a.replace(e,""),a):""}})}}]);
