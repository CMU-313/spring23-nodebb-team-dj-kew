"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[715,8042],{50992:(C,E,f)=>{var m,u;m=[f(32230),f(18487),f(59006),f(7927),f(87285),f(66709),f(62526)],u=function(v,k,p,t){const g={};let h;g.init=function(){h=ajaxify.data.available,$("#available").find("li .drag-item").draggable({connectToSortable:"#active-navigation",helper:"clone",distance:10,stop:b}),$("#active-navigation").sortable().droppable({accept:$("#available li .drag-item")}),$("#enabled").on("click",".iconPicker",function(){const a=$(this).find("i");k.init(a,function(n){const e=n.attr("value"),l=a.parents("[data-index]").attr("data-index");$('#active-navigation [data-index="'+l+'"] i.nav-icon').attr("class","fa fa-fw "+e),a.siblings('[name="iconClass"]').val(e),a.siblings(".change-icon-link").toggleClass("hidden",!!e)})}),$("#enabled").on("click",'[name="dropdown"]',function(){const a=$(this),n=a.parents("[data-index]").attr("data-index");$('#active-navigation [data-index="'+n+'"] i.dropdown-icon').toggleClass("hidden",!a.is(":checked"))}),$("#active-navigation").on("click","li",r),$("#enabled").on("click",".delete",c).on("click",".toggle",s),$("#save").on("click",x)};function r(){const a=$(this).attr("data-index");$("#active-navigation li").removeClass("active"),$(this).addClass("active");const n=$("#enabled").children('[data-index="'+a+'"]');return $("#enabled li").addClass("hidden"),n.length&&n.removeClass("hidden"),!1}function b(a,n){const e=n.helper.attr("data-id"),l=$('#active-navigation [data-id="'+e+'"]'),d=e==="custom"?{iconClass:"fa-navicon",groups:h[0].groups,enabled:!0}:h[e];d.index=(parseInt($("#enabled").children().last().attr("data-index"),10)||0)+1,d.title=v.escape(d.title),d.text=v.escape(d.text),d.groups=ajaxify.data.groups,p.parse("admin/settings/navigation","navigation",{navigation:[d]},function(o){v.translate(o,function(i){i=$(v.unescape(i)),l.after(i),l.remove()})}),p.parse("admin/settings/navigation","enabled",{enabled:[d]},function(o){v.translate(o,function(i){i=$(v.unescape(i)),$("#enabled").append(i),componentHandler.upgradeDom()})})}function x(){const a=[],n=[];$("#active-navigation li").each(function(){n.push($(this).attr("data-index"))}),n.forEach(function(e){const d=$("#enabled").children('[data-index="'+e+'"]').find("form").serializeArray(),o={};d.forEach(function(i){o[i.name]?(Array.isArray(o[i.name])||(o[i.name]=[o[i.name]]),o[i.name].push(i.value)):o[i.name]=i.value}),a.push(o)}),socket.emit("admin.navigation.save",a,function(e){e?t.error(e):t.success("Successfully saved navigation")})}function c(){const a=$(this).parents("[data-index]").attr("data-index");return $('#active-navigation [data-index="'+a+'"]').remove(),$('#enabled [data-index="'+a+'"]').remove(),!1}function s(){const a=$(this),n=a.hasClass("btn-success"),e=a.parents("[data-index]").attr("data-index");return v.translate(n?"[[admin/settings/navigation:btn.disable]]":"[[admin/settings/navigation:btn.enable]]",function(l){a.toggleClass("btn-warning").toggleClass("btn-success").html(l),a.parents("li").find('[name="enabled"]').val(n?"on":""),$('#active-navigation [data-index="'+e+'"] a').toggleClass("text-muted",!n)}),!1}return g}.apply(E,m),u!==void 0&&(C.exports=u)},18487:(C,E,f)=>{var m,u;m=[f(59006),f(31369)],u=function(v,k){const p={};return p.init=function(t,g){g=g||function(){};const h=t.hasClass("fa-2x");let r=t.attr("class").replace("fa-2x","").replace("fa","").replace(/\s+/g,"");if($("#icons .selected").removeClass("selected"),r)try{$("#icons .fa-icons .fa."+r).addClass("selected")}catch{r=""}v.render("partials/fontawesome",{}).then(function(b){b=$(b),b.find(".fa-icons").prepend($('<i class="fa fa-nbb-none"></i>'));const x=k.dialog({onEscape:!0,backdrop:!0,show:!1,message:b,title:"Select an Icon",buttons:{noIcon:{label:"No Icon",className:"btn-default",callback:function(){t.attr("class","fa "+(h?"fa-2x ":"")),t.val(""),t.attr("value",""),g(t)}},success:{label:"Select",className:"btn-primary",callback:function(){const c=$(".bootbox .selected").attr("class")||`fa fa-${$(".bootbox #fa-filter").val()}`,s=$("<div></div>").addClass(c).removeClass("fa").removeClass("selected").attr("class"),a=x.find("input").val();s?(t.attr("class","fa "+(h?"fa-2x ":"")+s),t.val(s),t.attr("value",s)):a&&(t.attr("class",a),t.val(a),t.attr("value",a)),g(t)}}}});x.on("show.bs.modal",function(){const c=$(this),s=c.find("input");r&&(c.find("."+r).addClass("selected"),s.val(r.replace("fa-","")))}).modal("show"),x.on("shown.bs.modal",function(){const c=$(this),s=c.find("input"),a=c.find(".fa-icons i"),n=c.find("button.btn-primary");function e(l){c.find("i.selected").removeClass("selected"),l?l.addClass("selected"):s.val().length===0?r&&c.find("."+r).addClass("selected"):c.find("i:visible").first().addClass("selected")}s.selectRange(0,s.val().length),c.find(".icon-container").on("click","i",function(){s.val($(this).attr("class").replace("fa fa-","").replace("selected","")),e($(this))}),s.on("keyup",function(l){l.keyCode!==13?(a.show(),a.each(function(d,o){o.className.match(new RegExp("^fa fa-.*"+s.val()+".*$"))||$(o).hide()}),e()):n.click()})})})},p}.apply(E,m),u!==void 0&&(C.exports=u)}}]);
