"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[977],{31956:(m,p,a)=>{var r,i;r=[a(59494),a(7237),a(32230),a(74344),a(7927)],i=function(y,k,u,v,l){const f={};$(window).on("action:ajaxify.start",function(){ajaxify.data.template.name==="account/settings"&&$("#bootswatchSkin").length&&$("#bootswatchSkin").val()!==config.bootswatchSkin&&d(config.bootswatchSkin)}),f.init=function(){y.init(),$("#submitBtn").on("click",function(){const t=C();return t.homePageRoute==="custom"&&t.homePageCustom?$.get(config.relative_path+"/"+t.homePageCustom,function(){g(t)}).fail(function(){l.error("[[error:invalid-home-page-route]]")}):g(t),!1}),$("#bootswatchSkin").on("change",function(){d($(this).val())}),$('[data-property="homePageRoute"]').on("change",h),h(),k.get("user/sessions").find(".timeago").timeago()};function C(){const t={};return $(".account").find("input, textarea, select").each(function(o,n){n=$(n);const e=n.attr("data-property");if(n.is("select")){t[e]=n.val();return}switch(n.attr("type")){case"checkbox":t[e]=n.is(":checked")?1:0;break;default:t[e]=n.val();break}}),t}function g(t){v.put(`/users/${ajaxify.data.uid}/settings`,{settings:t}).then(o=>{l.success("[[success:settings-saved]]");let n=!1;for(const e in o)o.hasOwnProperty(e)&&(e==="userLang"&&config.userLang!==o.userLang&&(n=!0),config.hasOwnProperty(e)&&(config[e]=o[e]));n&&parseInt(app.user.uid,10)===parseInt(ajaxify.data.theirid,10)&&(u.translate("[[language:dir]]",config.userLang,function(e){const s=$("html");s.attr("data-dir",e),s.css("direction",e)}),u.switchTimeagoLanguage(utils.userLangToTimeagoCode(config.userLang),function(){overrides.overrideTimeago(),ajaxify.refresh()}))})}function h(){$('[data-property="homePageRoute"]').val()==="custom"?$("#homePageCustom").show():($("#homePageCustom").hide(),$('[data-property="homePageCustom"]').val(""))}function d(t){const o=Array.prototype.filter.call(document.querySelectorAll('link[rel="stylesheet"]'),function(c){return c.href.indexOf(config.relative_path+"/assets/client")!==-1})[0]||null;if(!o)return;const n=$("body").attr("class").split(/\s+/).filter(function(c){return c.startsWith("skin-")});if(!n[0])return;let e=n[0].slice(5);if(e=e!=="noskin"?e:"",t===e)return;const s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.href=config.relative_path+"/assets/client"+(t?"-"+t:"")+".css",s.onload=function(){o.parentNode.removeChild(o),$("body").removeClass(n.join(" ")),$("body").addClass("skin-"+(t||"noskin"))},document.head.appendChild(s)}return f}.apply(p,r),i!==void 0&&(m.exports=i)}}]);
