"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[2502,7214,9617,6503,3014,8786,1383,5655,831,3094],{53094:(h,_,l)=>{var p,f;p=[l(7237),l(3547),l(32230),l(7927),l(74344)],f=function(o,e,g,a,s){const r={};let i,d,t;r.init=function(u){i||(t=ajaxify.data.tid,app.parseAndTranslate("modals/move-post",{},function(m){i=m,d=i.find("#move_posts_confirm"),$("body").append(i),i.find(".close,#move_posts_cancel").on("click",k),i.find("#topicId").on("keyup",utils.debounce(v,200)),e.init(x),y(),u&&e.togglePostSelection(u,u.attr("data-pid")),$(window).off("action:ajaxify.end",n).on("action:ajaxify.end",n),d.on("click",function(){const E=c();if(!E)return;d.attr("disabled",!0);const b={pids:e.pids.slice(),tid:E};if(config.undoTimeout>0)return a.alert({alert_id:"pids_move_"+e.pids.join("-"),title:"[[topic:thread_tools.move-posts]]",message:"[[topic:topic_move_posts_success]]",type:"success",timeout:1e4,timeoutfn:function(){A(b)},clickfn:function(P,I){delete I.timeoutfn,a.success("[[topic:topic_move_posts_undone]]"),d.removeAttr("disabled")}});A(b)})}))};function n(){if(!i)return;const u=i.find("#topicId");let m=null;ajaxify.data.template.topic&&ajaxify.data.tid&&parseInt(ajaxify.data.tid,10)!==t&&(m=ajaxify.data.tid),m&&!u.val()&&u.val(m),v()}function c(){const u=i.find("#topicId");return u.length&&u.val()?u.val():ajaxify.data.template.topic&&ajaxify.data.tid}function y(){if(!i)return;const u=c();e.pids.length?u&&parseInt(u,10)!==parseInt(t,10)?s.get("/topics/"+u,{}).then(function(m){if(!m||!m.tid)return a.error("[[error:no-topic]]");if(m.scheduled)return a.error("[[error:cant-move-posts-to-scheduled]]");const E=g.compile("topic:x-posts-will-be-moved-to-y",e.pids.length,m.title);i.find("#pids").translateHtml(E)}):i.find("#pids").translateHtml("[[topic:x-posts-selected, "+e.pids.length+"]]"):i.find("#pids").translateHtml("[[topic:no-posts-selected]]")}function v(){if(!i)return;const u=c();e.pids.length&&u&&parseInt(u,10)!==parseInt(t,10)?d.removeAttr("disabled"):d.attr("disabled",!0),y()}function x(){v()}function A(u){u.tid&&Promise.all(u.pids.map(m=>s.put(`/posts/${m}/move`,{tid:u.tid}))).then(()=>{u.pids.forEach(function(m){o.get("post","pid",m).fadeOut(500,function(){$(this).remove()})}),k()}).catch(a.error)}function k(){i&&(i.remove(),i=null,e.disable(),$(window).off("action:ajaxify.end",n))}return r}.apply(_,p),f!==void 0&&(h.exports=f)},7927:(h,_,l)=>{var p,f;p=[l(32230),l(7237),l(85233)],f=function(o,e,g){const a={};a.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const n=$("#"+t.alert_id);n.length?r(n,t):s(t)},a.success=function(t,n){a.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:n||5e3})},a.error=function(t,n){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}a.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:n||1e4})},a.remove=function(t){$("#alert_button_"+t).remove()};function s(t){app.parseAndTranslate("alert",t,function(n){let c=$("#"+t.alert_id);if(c.length)return r(c,t);c=n,c.fadeIn(200),e.get("toaster/tray").prepend(c),typeof t.closefn=="function"&&c.find("button").on("click",function(){return t.closefn(),i(c),!1}),t.timeout&&d(c,t),typeof t.clickfn=="function"&&c.addClass("pointer").on("click",function(y){$(y.target).is(".close")||t.clickfn(c,t),i(c)}),g.fire("action:alert.new",{alert:c,params:t})})}function r(t,n){t.find("strong").translateHtml(n.title),t.find("p").translateHtml(n.message),t.attr("class","alert alert-dismissable alert-"+n.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),n.timeout&&d(t,n),g.fire("action:alert.update",{alert:t,params:n}),t.off("click").removeClass("pointer"),typeof n.clickfn=="function"&&t.addClass("pointer").on("click",function(c){$(c.target).is(".close")||n.clickfn(),i(t)})}function i(t){t.fadeOut(500,function(){$(this).remove()})}function d(t,n){const c=n.timeout,y=setTimeout(function(){i(t),typeof n.timeoutfn=="function"&&n.timeoutfn(t,n)},c);t.attr("timeoutId",y),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(c+450)+"ms linear, background-color "+(c+450)+"ms ease-in"),t.addClass("animate"),g.fire("action:alert.animate",{alert:t,params:n})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return a}.apply(_,p),f!==void 0&&(h.exports=f)},74344:(h,_,l)=>{var p,f;p=[l(85233)],f=(o=>{const e={},g=config.relative_path+"/api/v3";function a(s,r){s.url=s.url.startsWith("/api")?config.relative_path+s.url:g+s.url;async function i(d){({options:s}=await o.fire("filter:api.options",{options:s})),$.ajax(s).done(t=>{d(null,t&&t.hasOwnProperty("status")&&t.hasOwnProperty("response")?t.response:t||{})}).fail(t=>{let n;t.responseJSON&&(n=t.responseJSON.status&&t.responseJSON.status.message?t.responseJSON.status.message:t.responseJSON.error),d(new Error(n||t.statusText))})}if(typeof r=="function"){i(r);return}return new Promise((d,t)=>{i(function(n,c){n?t(n):d(c)})})}return e.get=(s,r,i)=>a({url:s+(r&&Object.keys(r).length?"?"+$.param(r):"")},i),e.head=(s,r,i)=>a({url:s+(r&&Object.keys(r).length?"?"+$.param(r):""),method:"head"},i),e.post=(s,r,i)=>a({url:s,method:"post",data:JSON.stringify(r||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},i),e.patch=(s,r,i)=>a({url:s,method:"patch",data:JSON.stringify(r||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},i),e.put=(s,r,i)=>a({url:s,method:"put",data:JSON.stringify(r||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},i),e.del=(s,r,i)=>a({url:s,method:"delete",data:JSON.stringify(r),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},i),e.delete=e.del,e}).apply(_,p),f!==void 0&&(h.exports=f)},7237:(h,_,l)=>{var p;p=function(){const f={};return f.core={"topic/teaser":function(o){return o?$('[component="category/topic"][data-tid="'+o+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(o,e){return $('[component="topic"][data-'+o+'="'+e+'"]')},post:function(o,e){return $('[component="post"][data-'+o+'="'+e+'"]')},"post/content":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/content"]')},"post/header":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/header"]')},"post/anchor":function(o){return $('[component="post"][data-index="'+o+'"] [component="post/anchor"]')},"post/vote-count":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/vote-count"]')},"post/bookmark-count":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/bookmark-count"]')},"user/postcount":function(o){return $('[component="user/postcount"][data-uid="'+o+'"]')},"user/reputation":function(o){return $('[component="user/reputation"][data-uid="'+o+'"]')},"category/topic":function(o,e){return $('[component="category/topic"][data-'+o+'="'+e+'"]')},"categories/category":function(o,e){return $('[component="categories/category"][data-'+o+'="'+e+'"]')},"chat/message":function(o){return $('[component="chat/message"][data-mid="'+o+'"]')},"chat/message/body":function(o){return $('[component="chat/message"][data-mid="'+o+'"] [component="chat/message/body"]')},"chat/recent/room":function(o){return $('[component="chat/recent/room"][data-roomid="'+o+'"]')}},f.get=function(){const o=Array.prototype.slice.call(arguments,1);return f.core[arguments[0]]&&o.length?f.core[arguments[0]].apply(this,o):$('[component="'+arguments[0]+'"]')},f}.call(_,l,_,h),p!==void 0&&(h.exports=p)},3547:(h,_,l)=>{var p,f;p=[l(7237)],f=function(o){const e={};let g;e.pids=[];let a=!1;e.init=function(t,n){e.pids.length=0,g=t,n=n||{},a=n.allowMainPostSelect||!1,$("#content").on("click",'[component="topic"] [component="post"]',s),i()};function s(t){t.stopPropagation();const n=$(this).attr("data-pid"),c=$('[component="topic"] [data-pid="'+n+'"]');!a&&parseInt($(this).attr("data-index"),10)===0||e.togglePostSelection(c,n)}e.disable=function(){e.pids.forEach(function(t){o.get("post","pid",t).toggleClass("bg-success",!1)}),$("#content").off("click",'[component="topic"] [component="post"]',s),d()},e.togglePostSelection=function(t,n){if(n){const c=e.pids.indexOf(n);c===-1?(e.pids.push(n),t.toggleClass("bg-success",!0)):(e.pids.splice(c,1),t.toggleClass("bg-success",!1)),e.pids.length&&e.pids.sort(function(y,v){return y-v}),typeof g=="function"&&g()}};function r(){return!1}function i(){$("#content").on("click",'[component="post"] button, [component="post"] a',r)}function d(){$("#content").off("click",'[component="post"] button, [component="post"] a',r)}return e}.apply(_,p),f!==void 0&&(h.exports=f)}}]);
