"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[981,7214,9617,6503,2852,3014,8786,5655,831],{64819:(h,g,f)=>{var d,u;d=[f(32230),f(59006),f(74344),f(7927),f(23884)],u=function(e,c,y,l,i){const o={};let s=0;o.init=function(){app.enterRoom("user_list");const r=utils.param("section")?"?section="+utils.param("section"):"";$(".nav-pills li").removeClass("active").find('a[href="'+window.location.pathname+r+'"]').parent().addClass("active"),o.handleSearch(),i.handle(),socket.removeListener("event:user_status_change",v),socket.on("event:user_status_change",v)},o.handleSearch=function(r){s=r&&r.resultCount,$("#search-user").on("keyup",utils.debounce(m,250)),$('.search select, .search input[type="checkbox"]').on("change",m)};function m(){if(!ajaxify.data.template.users)return;$('[component="user/search/icon"]').removeClass("fa-search").addClass("fa-spinner fa-spin");const r=$("#search-user").val(),p=E(),_={section:p,page:1};if(!r)return n(_);_.query=r,_.sortBy=t();const A=[];($(".search .online-only").is(":checked")||p==="online")&&A.push("online"),p==="banned"&&A.push("banned"),p==="flagged"&&A.push("flagged"),A.length&&(_.filters=A),n(_)}function t(){let r;const p=E();return p==="sort-posts"?r="postcount":p==="sort-reputation"?r="reputation":p==="users"&&(r="joindate"),r}function n(r){y.get("/api/users",r).then(a).catch(l.error)}function a(r){c.render("partials/paginator",{pagination:r.pagination}).then(function(p){$(".pagination-container").replaceWith(p)}),s&&(r.users=r.users.slice(0,s)),r.isAdminOrGlobalMod=app.user.isAdmin||app.user.isGlobalMod,app.parseAndTranslate("users","users",r,function(p){$("#users-container").html(p),p.find("span.timeago").timeago(),$('[component="user/search/icon"]').addClass("fa-search").removeClass("fa-spinner fa-spin")})}function v(r){const p=E();(p.startsWith("online")||p.startsWith("users"))&&C(r)}function C(r){app.updateUserStatus($('#users-container [data-uid="'+r.uid+'"] [component="user/status"]'),r.status)}function E(){return utils.param("section")||""}return o}.apply(g,d),u!==void 0&&(h.exports=u)},23884:(h,g,f)=>{var d,u;d=[f(74344),f(59006),f(31369),f(7927)],u=function(e,c,y,l){const i={};function o(){return ajaxify.data.template.name.startsWith("admin/")}return i.handle=function(){$('[component="user/invite"]').on("click",function(s){s.preventDefault(),e.get(`/api/v3/users/${app.user.uid}/invites/groups`,{}).then(m=>{c.parse("modals/invite",{groups:m},function(t){y.dialog({message:t,title:`[[${o()?"admin/manage/users:invite":"users:invite"}]]`,onEscape:!0,buttons:{cancel:{label:`[[${o()?"admin/manage/users:alerts.button-cancel":"modules:bootbox.cancel"}]]`,className:"btn-default"},invite:{label:`[[${o()?"admin/manage/users:invite":"users:invite"}]]`,className:"btn-primary",callback:i.send}}})})}).catch(l.error)})},i.send=function(){const s=$("#invite-modal-emails"),m=$("#invite-modal-groups"),t={emails:s.val().split(",").map(n=>n.trim()).filter(Boolean).filter((n,a,v)=>a===v.indexOf(n)).join(","),groupsToJoin:m.val()};t.emails&&e.post(`/users/${app.user.uid}/invites`,t).then(()=>{l.success(`[[${o()?"admin/manage/users:alerts.email-sent-to":"users:invitation-email-sent"}, ${t.emails.replace(/,/g,"&#44; ")}]]`)}).catch(l.error)},i}.apply(g,d),u!==void 0&&(h.exports=u)},7927:(h,g,f)=>{var d,u;d=[f(32230),f(7237),f(85233)],u=function(e,c,y){const l={};l.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const n=$("#"+t.alert_id);n.length?o(n,t):i(t)},l.success=function(t,n){l.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:n||5e3})},l.error=function(t,n){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}l.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:n||1e4})},l.remove=function(t){$("#alert_button_"+t).remove()};function i(t){app.parseAndTranslate("alert",t,function(n){let a=$("#"+t.alert_id);if(a.length)return o(a,t);a=n,a.fadeIn(200),c.get("toaster/tray").prepend(a),typeof t.closefn=="function"&&a.find("button").on("click",function(){return t.closefn(),s(a),!1}),t.timeout&&m(a,t),typeof t.clickfn=="function"&&a.addClass("pointer").on("click",function(v){$(v.target).is(".close")||t.clickfn(a,t),s(a)}),y.fire("action:alert.new",{alert:a,params:t})})}function o(t,n){t.find("strong").translateHtml(n.title),t.find("p").translateHtml(n.message),t.attr("class","alert alert-dismissable alert-"+n.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),n.timeout&&m(t,n),y.fire("action:alert.update",{alert:t,params:n}),t.off("click").removeClass("pointer"),typeof n.clickfn=="function"&&t.addClass("pointer").on("click",function(a){$(a.target).is(".close")||n.clickfn(),s(t)})}function s(t){t.fadeOut(500,function(){$(this).remove()})}function m(t,n){const a=n.timeout,v=setTimeout(function(){s(t),typeof n.timeoutfn=="function"&&n.timeoutfn(t,n)},a);t.attr("timeoutId",v),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(a+450)+"ms linear, background-color "+(a+450)+"ms ease-in"),t.addClass("animate"),y.fire("action:alert.animate",{alert:t,params:n})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return l}.apply(g,d),u!==void 0&&(h.exports=u)},74344:(h,g,f)=>{var d,u;d=[f(85233)],u=(e=>{const c={},y=config.relative_path+"/api/v3";function l(i,o){i.url=i.url.startsWith("/api")?config.relative_path+i.url:y+i.url;async function s(m){({options:i}=await e.fire("filter:api.options",{options:i})),$.ajax(i).done(t=>{m(null,t&&t.hasOwnProperty("status")&&t.hasOwnProperty("response")?t.response:t||{})}).fail(t=>{let n;t.responseJSON&&(n=t.responseJSON.status&&t.responseJSON.status.message?t.responseJSON.status.message:t.responseJSON.error),m(new Error(n||t.statusText))})}if(typeof o=="function"){s(o);return}return new Promise((m,t)=>{s(function(n,a){n?t(n):m(a)})})}return c.get=(i,o,s)=>l({url:i+(o&&Object.keys(o).length?"?"+$.param(o):"")},s),c.head=(i,o,s)=>l({url:i+(o&&Object.keys(o).length?"?"+$.param(o):""),method:"head"},s),c.post=(i,o,s)=>l({url:i,method:"post",data:JSON.stringify(o||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},s),c.patch=(i,o,s)=>l({url:i,method:"patch",data:JSON.stringify(o||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},s),c.put=(i,o,s)=>l({url:i,method:"put",data:JSON.stringify(o||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},s),c.del=(i,o,s)=>l({url:i,method:"delete",data:JSON.stringify(o),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},s),c.delete=c.del,c}).apply(g,d),u!==void 0&&(h.exports=u)},7237:(h,g,f)=>{var d;d=function(){const u={};return u.core={"topic/teaser":function(e){return e?$('[component="category/topic"][data-tid="'+e+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(e,c){return $('[component="topic"][data-'+e+'="'+c+'"]')},post:function(e,c){return $('[component="post"][data-'+e+'="'+c+'"]')},"post/content":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/content"]')},"post/header":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/header"]')},"post/anchor":function(e){return $('[component="post"][data-index="'+e+'"] [component="post/anchor"]')},"post/vote-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/vote-count"]')},"post/bookmark-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/bookmark-count"]')},"user/postcount":function(e){return $('[component="user/postcount"][data-uid="'+e+'"]')},"user/reputation":function(e){return $('[component="user/reputation"][data-uid="'+e+'"]')},"category/topic":function(e,c){return $('[component="category/topic"][data-'+e+'="'+c+'"]')},"categories/category":function(e,c){return $('[component="categories/category"][data-'+e+'="'+c+'"]')},"chat/message":function(e){return $('[component="chat/message"][data-mid="'+e+'"]')},"chat/message/body":function(e){return $('[component="chat/message"][data-mid="'+e+'"] [component="chat/message/body"]')},"chat/recent/room":function(e){return $('[component="chat/recent/room"][data-roomid="'+e+'"]')}},u.get=function(){const e=Array.prototype.slice.call(arguments,1);return u.core[arguments[0]]&&e.length?u.core[arguments[0]].apply(this,e):$('[component="'+arguments[0]+'"]')},u}.call(g,f,g,h),d!==void 0&&(h.exports=d)}}]);
