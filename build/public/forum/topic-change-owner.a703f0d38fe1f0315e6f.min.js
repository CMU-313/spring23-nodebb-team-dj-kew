"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[3918,7214,9617,6503,3014,8253,8786,1383,5655,831,6111,6193],{6111:(h,y,p)=>{var d,u;d=[p(3547),p(86193),p(7927)],u=function(e,c,l){const f={};let i,s,o=0;f.init=function(g){i||app.parseAndTranslate("partials/change_owner_modal",{},function(_){i=_,s=i.find("#change_owner_commit"),$("body").append(i),i.find(".close,#change_owner_cancel").on("click",m),i.find("#username").on("keyup",t),e.init(n,{allowMainPostSelect:!0}),a(),g&&e.togglePostSelection(g,g.attr("data-pid")),s.on("click",function(){r()}),c.user(i.find("#username"),{filters:["notbanned"]},function(E,k){o=k.item.user.uid,t()})})};function a(){e.pids.length?i.find("#pids").translateHtml("[[topic:fork_pid_count, "+e.pids.length+"]]"):i.find("#pids").translateHtml("[[topic:fork_no_pids]]")}function t(){o&&i.find("#username").length&&i.find("#username").val().length&&e.pids.length?s.removeAttr("disabled"):s.attr("disabled",!0)}function n(){t(),a()}function r(){o&&socket.emit("posts.changeOwner",{pids:e.pids,toUid:o},function(g){if(g)return l.error(g);ajaxify.refresh(),m()})}function m(){i&&(i.remove(),i=null,e.disable())}return f}.apply(y,d),u!==void 0&&(h.exports=u)},7927:(h,y,p)=>{var d,u;d=[p(32230),p(7237),p(85233)],u=function(e,c,l){const f={};f.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const n=$("#"+t.alert_id);n.length?s(n,t):i(t)},f.success=function(t,n){f.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:n||5e3})},f.error=function(t,n){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}f.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:n||1e4})},f.remove=function(t){$("#alert_button_"+t).remove()};function i(t){app.parseAndTranslate("alert",t,function(n){let r=$("#"+t.alert_id);if(r.length)return s(r,t);r=n,r.fadeIn(200),c.get("toaster/tray").prepend(r),typeof t.closefn=="function"&&r.find("button").on("click",function(){return t.closefn(),o(r),!1}),t.timeout&&a(r,t),typeof t.clickfn=="function"&&r.addClass("pointer").on("click",function(m){$(m.target).is(".close")||t.clickfn(r,t),o(r)}),l.fire("action:alert.new",{alert:r,params:t})})}function s(t,n){t.find("strong").translateHtml(n.title),t.find("p").translateHtml(n.message),t.attr("class","alert alert-dismissable alert-"+n.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),n.timeout&&a(t,n),l.fire("action:alert.update",{alert:t,params:n}),t.off("click").removeClass("pointer"),typeof n.clickfn=="function"&&t.addClass("pointer").on("click",function(r){$(r.target).is(".close")||n.clickfn(),o(t)})}function o(t){t.fadeOut(500,function(){$(this).remove()})}function a(t,n){const r=n.timeout,m=setTimeout(function(){o(t),typeof n.timeoutfn=="function"&&n.timeoutfn(t,n)},r);t.attr("timeoutId",m),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(r+450)+"ms linear, background-color "+(r+450)+"ms ease-in"),t.addClass("animate"),l.fire("action:alert.animate",{alert:t,params:n})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return f}.apply(y,d),u!==void 0&&(h.exports=u)},74344:(h,y,p)=>{var d,u;d=[p(85233)],u=(e=>{const c={},l=config.relative_path+"/api/v3";function f(i,s){i.url=i.url.startsWith("/api")?config.relative_path+i.url:l+i.url;async function o(a){({options:i}=await e.fire("filter:api.options",{options:i})),$.ajax(i).done(t=>{a(null,t&&t.hasOwnProperty("status")&&t.hasOwnProperty("response")?t.response:t||{})}).fail(t=>{let n;t.responseJSON&&(n=t.responseJSON.status&&t.responseJSON.status.message?t.responseJSON.status.message:t.responseJSON.error),a(new Error(n||t.statusText))})}if(typeof s=="function"){o(s);return}return new Promise((a,t)=>{o(function(n,r){n?t(n):a(r)})})}return c.get=(i,s,o)=>f({url:i+(s&&Object.keys(s).length?"?"+$.param(s):"")},o),c.head=(i,s,o)=>f({url:i+(s&&Object.keys(s).length?"?"+$.param(s):""),method:"head"},o),c.post=(i,s,o)=>f({url:i,method:"post",data:JSON.stringify(s||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},o),c.patch=(i,s,o)=>f({url:i,method:"patch",data:JSON.stringify(s||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},o),c.put=(i,s,o)=>f({url:i,method:"put",data:JSON.stringify(s||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},o),c.del=(i,s,o)=>f({url:i,method:"delete",data:JSON.stringify(s),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},o),c.delete=c.del,c}).apply(y,d),u!==void 0&&(h.exports=u)},86193:(h,y,p)=>{var d,u;d=[p(74344),p(7927)],u=function(e,c){const l={},f={delay:200};l.init=s=>{const{input:o,source:a,onSelect:t,delay:n}={...f,...s};app.loadJQueryUI(function(){o.autocomplete({delay:n,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(r,m){i(o,t,r,m)},source:a})})},l.user=function(s,o,a){typeof o=="function"&&(a=o,o={}),o=o||{},l.init({input:s,onSelect:a,source:(t,n)=>{o.query=t.term,e.get("/api/users",o,function(r,m){if(r)return c.error(r);if(m&&m.users){const g=m.users.map(function(_){const E=$("<div></div>").html(_.username).text();return _&&{label:E,value:E,user:{uid:_.uid,name:_.username,slug:_.userslug,username:_.username,userslug:_.userslug,picture:_.picture,banned:_.banned,"icon:text":_["icon:text"],"icon:bgColor":_["icon:bgColor"]}}});n(g)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},l.group=function(s,o){l.init({input:s,onSelect:o,source:(a,t)=>{socket.emit("groups.search",{query:a.term},function(n,r){if(n)return c.error(n);if(r&&r.length){const m=r.map(function(g){return g&&{label:g.name,value:g.name,group:g}});t(m)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},l.tag=function(s,o){l.init({input:s,onSelect:o,delay:100,source:(a,t)=>{socket.emit("topics.autocompleteTags",{query:a.term,cid:ajaxify.data.cid||0},function(n,r){if(n)return c.error(n);r&&t(r),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function i(s,o,a,t){o=o||function(){};const n=jQuery.Event("keypress");n.which=13,n.keyCode=13,setTimeout(function(){s.trigger(n)},100),o(a,t)}return l}.apply(y,d),u!==void 0&&(h.exports=u)},7237:(h,y,p)=>{var d;d=function(){const u={};return u.core={"topic/teaser":function(e){return e?$('[component="category/topic"][data-tid="'+e+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(e,c){return $('[component="topic"][data-'+e+'="'+c+'"]')},post:function(e,c){return $('[component="post"][data-'+e+'="'+c+'"]')},"post/content":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/content"]')},"post/header":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/header"]')},"post/anchor":function(e){return $('[component="post"][data-index="'+e+'"] [component="post/anchor"]')},"post/vote-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/vote-count"]')},"post/bookmark-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/bookmark-count"]')},"user/postcount":function(e){return $('[component="user/postcount"][data-uid="'+e+'"]')},"user/reputation":function(e){return $('[component="user/reputation"][data-uid="'+e+'"]')},"category/topic":function(e,c){return $('[component="category/topic"][data-'+e+'="'+c+'"]')},"categories/category":function(e,c){return $('[component="categories/category"][data-'+e+'="'+c+'"]')},"chat/message":function(e){return $('[component="chat/message"][data-mid="'+e+'"]')},"chat/message/body":function(e){return $('[component="chat/message"][data-mid="'+e+'"] [component="chat/message/body"]')},"chat/recent/room":function(e){return $('[component="chat/recent/room"][data-roomid="'+e+'"]')}},u.get=function(){const e=Array.prototype.slice.call(arguments,1);return u.core[arguments[0]]&&e.length?u.core[arguments[0]].apply(this,e):$('[component="'+arguments[0]+'"]')},u}.call(y,p,y,h),d!==void 0&&(h.exports=d)},3547:(h,y,p)=>{var d,u;d=[p(7237)],u=function(e){const c={};let l;c.pids=[];let f=!1;c.init=function(t,n){c.pids.length=0,l=t,n=n||{},f=n.allowMainPostSelect||!1,$("#content").on("click",'[component="topic"] [component="post"]',i),o()};function i(t){t.stopPropagation();const n=$(this).attr("data-pid"),r=$('[component="topic"] [data-pid="'+n+'"]');!f&&parseInt($(this).attr("data-index"),10)===0||c.togglePostSelection(r,n)}c.disable=function(){c.pids.forEach(function(t){e.get("post","pid",t).toggleClass("bg-success",!1)}),$("#content").off("click",'[component="topic"] [component="post"]',i),a()},c.togglePostSelection=function(t,n){if(n){const r=c.pids.indexOf(n);r===-1?(c.pids.push(n),t.toggleClass("bg-success",!0)):(c.pids.splice(r,1),t.toggleClass("bg-success",!1)),c.pids.length&&c.pids.sort(function(m,g){return m-g}),typeof l=="function"&&l()}};function s(){return!1}function o(){$("#content").on("click",'[component="post"] button, [component="post"] a',s)}function a(){$("#content").off("click",'[component="post"] button, [component="post"] a',s)}return c}.apply(y,d),u!==void 0&&(h.exports=u)}}]);
