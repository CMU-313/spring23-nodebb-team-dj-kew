"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[2089],{37039:(v,C,e)=>{var c,i;c=[e(59494),e(32230),e(21322),e(74344),e(7927)],i=function(g,y,P,_,f){const u={};u.init=function(){g.init(),E()};function E(){const s=$("#inputCurrentPassword"),o=$("#password-notify"),a=$("#password-confirm-notify"),r=$("#inputNewPassword"),l=$("#inputNewPasswordAgain");let n=!1,t=!1;function p(){n=!1;try{if(utils.assertPasswordValidity(r.val(),P),r.val()===ajaxify.data.username)throw new Error("[[user:password_same_as_username]]");if(r.val()===ajaxify.data.email)throw new Error("[[user:password_same_as_email]]");h(o),n=!0}catch(d){w(o,d.message)}}function m(){r.val()!==l.val()?(w(a,"[[user:change_password_error_match]]"),t=!1):(r.val()?h(a):(a.parent().removeClass("alert-success alert-danger"),a.children().show(),a.find(".msg").html("")),t=!0)}r.on("blur",p),l.on("blur",m),$("#changePasswordBtn").on("click",function(){p(),m();const d=$(this);return n&&t?(d.addClass("disabled").find("i").removeClass("hide"),_.put("/users/"+ajaxify.data.theirid+"/password",{currentPassword:s.val(),newPassword:r.val()}).then(()=>{parseInt(app.user.uid,10)===parseInt(ajaxify.data.uid,10)?window.location.href=config.relative_path+"/login":ajaxify.go("user/"+ajaxify.data.userslug+"/edit")}).finally(()=>{d.removeClass("disabled").find("i").addClass("hide"),s.val(""),r.val(""),l.val(""),o.parent().removeClass("show-success show-danger"),a.parent().removeClass("show-success show-danger"),t=!1,n=!1})):(t||f.error("[[user:change_password_error_match]]"),n||f.error("[[user:change_password_error]]")),!1})}function w(s,o){y.translate(o,function(a){s.html(a),s.parent().removeClass("show-success").addClass("show-danger")})}function h(s){s.html(""),s.parent().removeClass("show-danger").addClass("show-success")}return u}.apply(C,c),i!==void 0&&(v.exports=i)}}]);
