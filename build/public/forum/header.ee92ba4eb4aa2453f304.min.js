"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[3388,7214,6503,8724,6815,1237,8786,5655],{59016:(h,m,i)=>{var l,a;l=[i(4695),i(80431),i(50395),i(7927)],a=function(e,f,p,o){const u={};u.prepareDOM=function(){app.user.uid>0&&e.initUnreadTopics(),f.prepareDOM(),p.prepareDOM(),s(),r(),c()};function s(){$('[component="header/usercontrol"] [data-status]').off("click").on("click",function(t){const n=$(this).attr("data-status");socket.emit("user.setStatus",n,function(d){if(d)return o.error(d);$('[data-uid="'+app.user.uid+'"] [component="user/status"], [component="header/profilelink"] [component="user/status"]').removeClass("away online dnd offline").addClass(n),$('[component="header/usercontrol"] [data-status]').each(function(){$(this).find("span").toggleClass("bold",$(this).attr("data-status")===n)}),app.user.status=n}),t.preventDefault()})}function r(){const t=utils.findBootstrapEnvironment();t==="xs"||t==="sm"||utils.isTouchDevice()||($("#header-menu li a[title]").each(function(){$(this).tooltip({placement:"bottom",trigger:"hover",title:$(this).attr("title")})}),$("#search-form").tooltip({placement:"bottom",trigger:"hover",title:$("#search-button i").attr("title")}),$("#user_dropdown").tooltip({placement:"bottom",trigger:"hover",title:$("#user_dropdown").attr("title")}))}function c(){$("#header-menu .container").on("click",'[component="user/logout"]',function(){return i.e(145).then(function(){var t=[i(39002)];(function(n){n()}).apply(null,t)}).catch(i.oe),!1})}return u}.apply(m,l),a!==void 0&&(h.exports=a)},50395:(h,m,i)=>{var l,a;l=[i(7237)],a=function(e){const f={};f.prepareDOM=function(){const r=e.get("chat/dropdown"),c=e.get("chat/list");r.on("click",function(){r.parent().hasClass("open")||s("loadChatsDropdown",c)}),r.parents(".dropdown").hasClass("open")&&s("loadChatsDropdown",c),socket.removeListener("event:chats.receive",p),socket.on("event:chats.receive",p),socket.removeListener("event:user_status_change",o),socket.on("event:user_status_change",o),socket.removeListener("event:chats.roomRename",u),socket.on("event:chats.roomRename",u),socket.on("event:unread.updateChatCount",function(t){e.get("chat/icon").toggleClass("unread-count",t>0).attr("data-content",t>99?"99+":t)})};function p(r){s("onChatMessageReceived",r)}function o(r){s("onUserStatusChange",r)}function u(r){s("onRoomRename",r)}function s(r,c){Promise.all([i.e(3216),i.e(831)]).then(function(){var t=[i(93216)];(function(n){n[r](c)}).apply(null,t)}).catch(i.oe)}return f}.apply(m,l),a!==void 0&&(h.exports=a)},80431:(h,m,i)=>{var l,a;l=[i(7237)],a=function(e){const f={};f.prepareDOM=function(){const s=e.get("notifications"),r=s.children("a"),c=e.get("notifications/list");r.on("click",function(t){t.preventDefault(),!s.hasClass("open")&&u("loadNotifications",c)}),r.parents(".dropdown").hasClass("open")&&u("loadNotifications",c),socket.removeListener("event:new_notification",p),socket.on("event:new_notification",p),socket.removeListener("event:notifications.updateCount",o),socket.on("event:notifications.updateCount",o)};function p(s){u("onNewNotification",s)}function o(s){u("updateNotifCount",s)}function u(s,r){Promise.all([i.e(2840),i.e(9986)]).then(function(){var c=[i(69986)];(function(t){t[s](r)}).apply(null,c)}).catch(i.oe)}return f}.apply(m,l),a!==void 0&&(h.exports=a)},4695:(h,m,i)=>{var l;l=function(){const a={},e={ignoring:1,notwatching:2,watching:3};a.initUnreadTopics=function(){const o=app.user.unreadData;function u(c){if(c&&c.posts&&c.posts.length&&o){const t=c.posts[0];if(parseInt(t.uid,10)===parseInt(app.user.uid,10)||!t.topic.isFollowing&&t.categoryWatchState!==e.watching)return;const n=t.topic.tid;(!o[""][n]||!o.new[n]||!o.watched[n]||!o.unreplied[n])&&r(n),o[""][n]||(s(""),o[""][n]=!0),t.isMain&&parseInt(t.uid,10)!==parseInt(app.user.uid,10)&&!o.new[n]&&(s("new"),o.new[n]=!0),parseInt(t.topic.postcount,10)<=1&&!o.unreplied[n]&&(s("unreplied"),o.unreplied[n]=!0),t.topic.isFollowing&&!o.watched[n]&&(s("watched"),o.watched[n]=!0)}}function s(c){const t="/unread"+(c?"?filter="+c:""),n=1+parseInt($('a[href="'+config.relative_path+t+'"].navigation-link i').attr("data-content"),10);p(t,n)}function r(c){$('[data-tid="'+c+'"]').addClass("unread")}$(window).on("action:ajaxify.end",function(){ajaxify.data.template.topic&&["","new","watched","unreplied"].forEach(function(c){delete o[c][ajaxify.data.tid]})}),socket.removeListener("event:new_post",u),socket.on("event:new_post",u),socket.removeListener("event:unread.updateCount",f),socket.on("event:unread.updateCount",f)};function f(o){p("/unread",o.unreadTopicCount),p("/unread?filter=new",o.unreadNewTopicCount),p("/unread?filter=watched",o.unreadWatchedTopicCount),p("/unread?filter=unreplied",o.unreadUnrepliedTopicCount)}function p(o,u){utils.isNumber(u)&&($('a[href="'+config.relative_path+o+'"].navigation-link i').toggleClass("unread-count",u>0).attr("data-content",u>99?"99+":u),$('#mobile-menu [data-unread-url="'+o+'"]').attr("data-content",u>99?"99+":u))}return a.updateUnreadTopicCount=p,a}.call(m,i,m,h),l!==void 0&&(h.exports=l)},7927:(h,m,i)=>{var l,a;l=[i(32230),i(7237),i(85233)],a=function(e,f,p){const o={};o.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const n=$("#"+t.alert_id);n.length?s(n,t):u(t)},o.success=function(t,n){o.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:n||5e3})},o.error=function(t,n){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}o.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:n||1e4})},o.remove=function(t){$("#alert_button_"+t).remove()};function u(t){app.parseAndTranslate("alert",t,function(n){let d=$("#"+t.alert_id);if(d.length)return s(d,t);d=n,d.fadeIn(200),f.get("toaster/tray").prepend(d),typeof t.closefn=="function"&&d.find("button").on("click",function(){return t.closefn(),r(d),!1}),t.timeout&&c(d,t),typeof t.clickfn=="function"&&d.addClass("pointer").on("click",function(g){$(g.target).is(".close")||t.clickfn(d,t),r(d)}),p.fire("action:alert.new",{alert:d,params:t})})}function s(t,n){t.find("strong").translateHtml(n.title),t.find("p").translateHtml(n.message),t.attr("class","alert alert-dismissable alert-"+n.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),n.timeout&&c(t,n),p.fire("action:alert.update",{alert:t,params:n}),t.off("click").removeClass("pointer"),typeof n.clickfn=="function"&&t.addClass("pointer").on("click",function(d){$(d.target).is(".close")||n.clickfn(),r(t)})}function r(t){t.fadeOut(500,function(){$(this).remove()})}function c(t,n){const d=n.timeout,g=setTimeout(function(){r(t),typeof n.timeoutfn=="function"&&n.timeoutfn(t,n)},d);t.attr("timeoutId",g),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(d+450)+"ms linear, background-color "+(d+450)+"ms ease-in"),t.addClass("animate"),p.fire("action:alert.animate",{alert:t,params:n})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return o}.apply(m,l),a!==void 0&&(h.exports=a)},7237:(h,m,i)=>{var l;l=function(){const a={};return a.core={"topic/teaser":function(e){return e?$('[component="category/topic"][data-tid="'+e+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(e,f){return $('[component="topic"][data-'+e+'="'+f+'"]')},post:function(e,f){return $('[component="post"][data-'+e+'="'+f+'"]')},"post/content":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/content"]')},"post/header":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/header"]')},"post/anchor":function(e){return $('[component="post"][data-index="'+e+'"] [component="post/anchor"]')},"post/vote-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/vote-count"]')},"post/bookmark-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/bookmark-count"]')},"user/postcount":function(e){return $('[component="user/postcount"][data-uid="'+e+'"]')},"user/reputation":function(e){return $('[component="user/reputation"][data-uid="'+e+'"]')},"category/topic":function(e,f){return $('[component="category/topic"][data-'+e+'="'+f+'"]')},"categories/category":function(e,f){return $('[component="categories/category"][data-'+e+'="'+f+'"]')},"chat/message":function(e){return $('[component="chat/message"][data-mid="'+e+'"]')},"chat/message/body":function(e){return $('[component="chat/message"][data-mid="'+e+'"] [component="chat/message/body"]')},"chat/recent/room":function(e){return $('[component="chat/recent/room"][data-roomid="'+e+'"]')}},a.get=function(){const e=Array.prototype.slice.call(arguments,1);return a.core[arguments[0]]&&e.length?a.core[arguments[0]].apply(this,e):$('[component="'+arguments[0]+'"]')},a}.call(m,i,m,h),l!==void 0&&(h.exports=l)}}]);
