"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1237],{4695:(c,s,f)=>{var u;u=function(){const d={},l={ignoring:1,notwatching:2,watching:3};d.initUnreadTopics=function(){const e=app.user.unreadData;function a(t){if(t&&t.posts&&t.posts.length&&e){const i=t.posts[0];if(parseInt(i.uid,10)===parseInt(app.user.uid,10)||!i.topic.isFollowing&&i.categoryWatchState!==l.watching)return;const n=i.topic.tid;(!e[""][n]||!e.new[n]||!e.watched[n]||!e.unreplied[n])&&w(n),e[""][n]||(r(""),e[""][n]=!0),i.isMain&&parseInt(i.uid,10)!==parseInt(app.user.uid,10)&&!e.new[n]&&(r("new"),e.new[n]=!0),parseInt(i.topic.postcount,10)<=1&&!e.unreplied[n]&&(r("unreplied"),e.unreplied[n]=!0),i.topic.isFollowing&&!e.watched[n]&&(r("watched"),e.watched[n]=!0)}}function r(t){const i="/unread"+(t?"?filter="+t:""),n=1+parseInt($('a[href="'+config.relative_path+i+'"].navigation-link i').attr("data-content"),10);o(i,n)}function w(t){$('[data-tid="'+t+'"]').addClass("unread")}$(window).on("action:ajaxify.end",function(){ajaxify.data.template.topic&&["","new","watched","unreplied"].forEach(function(t){delete e[t][ajaxify.data.tid]})}),socket.removeListener("event:new_post",a),socket.on("event:new_post",a),socket.removeListener("event:unread.updateCount",p),socket.on("event:unread.updateCount",p)};function p(e){o("/unread",e.unreadTopicCount),o("/unread?filter=new",e.unreadNewTopicCount),o("/unread?filter=watched",e.unreadWatchedTopicCount),o("/unread?filter=unreplied",e.unreadUnrepliedTopicCount)}function o(e,a){utils.isNumber(a)&&($('a[href="'+config.relative_path+e+'"].navigation-link i').toggleClass("unread-count",a>0).attr("data-content",a>99?"99+":a),$('#mobile-menu [data-unread-url="'+e+'"]').attr("data-content",a>99?"99+":a))}return d.updateUnreadTopicCount=o,d}.call(s,f,s,c),u!==void 0&&(c.exports=u)}}]);
