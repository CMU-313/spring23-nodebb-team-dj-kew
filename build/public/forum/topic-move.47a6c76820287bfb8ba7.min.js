"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[7434,7214,6503,6623,9286,8786,5655,7378],{57378:(y,h,m)=>{var g,d;g=[m(50548),m(7927),m(85233)],d=function(o,u,f){const e={};let c,s;e.init=function(n,l,p){e.tids=n,e.currentCid=l,e.onComplete=p,e.moveAll=!n,r()};function r(){app.parseAndTranslate("partials/move_thread_modal",{},function(n){c=n,c.on("hidden.bs.modal",function(){c.remove()}),c.find("#move-confirm").addClass("hide"),(e.moveAll||e.tids&&e.tids.length>1)&&c.find(".modal-header h3").translateText("[[topic:move_topics]]"),o.init(c.find('[component="category-selector"]'),{onSelect:a,privilege:"moderate"}),c.find("#move_thread_commit").on("click",t),c.modal("show")})}function a(n){s=n,c.find("#move_thread_commit").prop("disabled",!1)}function t(){const n=c.find("#move_thread_commit");if(!n.prop("disabled")&&s&&s.cid){n.prop("disabled",!0),c.modal("hide");let l="[[topic:topic_move_success, "+s.name+"]]";e.tids&&e.tids.length>1?l="[[topic:topic_move_multiple_success, "+s.name+"]]":e.tids||(l="[[topic:topic_move_all_success, "+s.name+"]]");const p={tids:e.tids?e.tids.slice():null,cid:s.cid,currentCid:e.currentCid,onComplete:e.onComplete};if(config.undoTimeout>0)return u.alert({alert_id:"tids_move_"+(e.tids?e.tids.join("-"):"all"),title:"[[topic:thread_tools.move]]",message:l,type:"success",timeout:config.undoTimeout,timeoutfn:function(){i(p)},clickfn:function(_,C){delete C.timeoutfn,u.success("[[topic:topic_move_undone]]")}});i(p)}}function i(n){f.fire("action:topic.move",n),socket.emit(n.tids?"topics.move":"topics.moveAll",n,function(l){if(l)return u.error(l);typeof n.onComplete=="function"&&n.onComplete()})}return e}.apply(h,g),d!==void 0&&(y.exports=d)},7927:(y,h,m)=>{var g,d;g=[m(32230),m(7237),m(85233)],d=function(o,u,f){const e={};e.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const i=$("#"+t.alert_id);i.length?s(i,t):c(t)},e.success=function(t,i){e.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:i||5e3})},e.error=function(t,i){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}e.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:i||1e4})},e.remove=function(t){$("#alert_button_"+t).remove()};function c(t){app.parseAndTranslate("alert",t,function(i){let n=$("#"+t.alert_id);if(n.length)return s(n,t);n=i,n.fadeIn(200),u.get("toaster/tray").prepend(n),typeof t.closefn=="function"&&n.find("button").on("click",function(){return t.closefn(),r(n),!1}),t.timeout&&a(n,t),typeof t.clickfn=="function"&&n.addClass("pointer").on("click",function(l){$(l.target).is(".close")||t.clickfn(n,t),r(n)}),f.fire("action:alert.new",{alert:n,params:t})})}function s(t,i){t.find("strong").translateHtml(i.title),t.find("p").translateHtml(i.message),t.attr("class","alert alert-dismissable alert-"+i.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),i.timeout&&a(t,i),f.fire("action:alert.update",{alert:t,params:i}),t.off("click").removeClass("pointer"),typeof i.clickfn=="function"&&t.addClass("pointer").on("click",function(n){$(n.target).is(".close")||i.clickfn(),r(t)})}function r(t){t.fadeOut(500,function(){$(this).remove()})}function a(t,i){const n=i.timeout,l=setTimeout(function(){r(t),typeof i.timeoutfn=="function"&&i.timeoutfn(t,i)},n);t.attr("timeoutId",l),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(n+450)+"ms linear, background-color "+(n+450)+"ms ease-in"),t.addClass("animate"),f.fire("action:alert.animate",{alert:t,params:i})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return e}.apply(h,g),d!==void 0&&(y.exports=d)},22905:(y,h,m)=>{var g,d;g=[m(7927)],d=function(o){const u={};return u.init=function(f,e){let c=null;e=e||{},e.privilege=e.privilege||"topics:read",e.states=e.states||["watching","notwatching","ignoring"];let s=[];Array.isArray(e.localCategories)&&(s=e.localCategories.map(n=>({...n}))),e.selectedCids=e.selectedCids||ajaxify.data.selectedCids||[];const r=f.find('[component="category-selector-search"]');if(!r.length)return;const a=r.parent('[component="category/dropdown"]').length>0||r.parent('[component="category-selector"]').length>0;f.on("show.bs.dropdown",function(){a&&(f.find(".dropdown-toggle").addClass("hidden"),r.removeClass("hidden"));function n(){const l=r.find("input").val();l.length>1||!l&&!c?t(l,function(p){c=c||p,i(p)}):!l&&c&&(c.forEach(function(p){p.selected=e.selectedCids.includes(p.cid)}),i(c))}r.on("click",function(l){l.preventDefault(),l.stopPropagation()}),r.find("input").val("").on("keyup",utils.debounce(n,300)),n()}),f.on("shown.bs.dropdown",function(){r.find("input").focus()}),f.on("hide.bs.dropdown",function(){a&&(f.find(".dropdown-toggle").removeClass("hidden"),r.addClass("hidden")),r.off("click"),r.find("input").off("keyup")});function t(n,l){socket.emit("categories.categorySearch",{search:n,query:utils.params(),parentCid:e.parentCid||0,selectedCids:e.selectedCids,privilege:e.privilege,states:e.states,showLinks:e.showLinks},function(p,_){if(p)return o.error(p);l(s.concat(_))})}function i(n){app.parseAndTranslate(e.template,{categoryItems:n.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(l){f.find('[component="category/list"]').replaceWith(l.find('[component="category/list"]')),f.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!n.length)})}},u}.apply(h,g),d!==void 0&&(y.exports=d)},50548:(y,h,m)=>{var g,d;g=[m(22905),m(31369),m(85233)],d=function(o,u,f){const e={};return e.init=function(c,s){if(!c||!c.length)return;s=s||{};const r=s.onSelect||function(){};s.states=s.states||["watching","notwatching","ignoring"],s.template="partials/category-selector",f.fire("action:category.selector.options",{el:c,options:s}),o.init(c,s);const a={el:c,selectedCategory:null};c.on("click","[data-cid]",function(){const i=$(this);if(i.hasClass("disabled"))return!1;a.selectCategory(i.attr("data-cid")),r(a.selectedCategory)});const t=a.el.find('[component="category-selector-selected"]').html();return a.selectCategory=function(i){const n=a.el.find('[data-cid="'+i+'"]');a.selectedCategory={cid:i,name:n.attr("data-name")},n.length?a.el.find('[component="category-selector-selected"]').html(n.find('[component="category-markup"]').html()):a.el.find('[component="category-selector-selected"]').html(t)},a.getSelectedCategory=function(){return a.selectedCategory},a.getSelectedCid=function(){return a.selectedCategory?a.selectedCategory.cid:0},a},e.modal=function(c){c=c||{},c.onSelect=c.onSelect||function(){},c.onSubmit=c.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:c.message},function(s){const r=u.dialog({title:c.title||"[[modules:composer.select_category]]",message:s,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:t}}}),a=e.init(r.find('[component="category-selector"]'),c);function t(i){return i.preventDefault(),a.selectedCategory&&(c.onSubmit(a.selectedCategory),r.modal("hide")),!1}c.openOnLoad&&r.on("shown.bs.modal",function(){r.find(".dropdown-toggle").dropdown("toggle")}),r.find("form").on("submit",t)})},e}.apply(h,g),d!==void 0&&(y.exports=d)},7237:(y,h,m)=>{var g;g=function(){const d={};return d.core={"topic/teaser":function(o){return o?$('[component="category/topic"][data-tid="'+o+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(o,u){return $('[component="topic"][data-'+o+'="'+u+'"]')},post:function(o,u){return $('[component="post"][data-'+o+'="'+u+'"]')},"post/content":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/content"]')},"post/header":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/header"]')},"post/anchor":function(o){return $('[component="post"][data-index="'+o+'"] [component="post/anchor"]')},"post/vote-count":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/vote-count"]')},"post/bookmark-count":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/bookmark-count"]')},"user/postcount":function(o){return $('[component="user/postcount"][data-uid="'+o+'"]')},"user/reputation":function(o){return $('[component="user/reputation"][data-uid="'+o+'"]')},"category/topic":function(o,u){return $('[component="category/topic"][data-'+o+'="'+u+'"]')},"categories/category":function(o,u){return $('[component="categories/category"][data-'+o+'="'+u+'"]')},"chat/message":function(o){return $('[component="chat/message"][data-mid="'+o+'"]')},"chat/message/body":function(o){return $('[component="chat/message"][data-mid="'+o+'"] [component="chat/message/body"]')},"chat/recent/room":function(o){return $('[component="chat/recent/room"][data-roomid="'+o+'"]')}},d.get=function(){const o=Array.prototype.slice.call(arguments,1);return d.core[arguments[0]]&&o.length?d.core[arguments[0]].apply(this,o):$('[component="'+arguments[0]+'"]')},d}.call(h,m,h,y),g!==void 0&&(y.exports=g)}}]);
