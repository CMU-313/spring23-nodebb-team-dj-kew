"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[9126],{9872:(u,p,c)=>{var f,l;f=[c(85233),c(32230),c(86569)],l=function(d,g){const e={_capsState:!1};return e.init=function(){const o=$("#login-error-notify"),r=$("#login"),a=$("#login-form");r.on("click",function(n){if(n.preventDefault(),!$("#username").val()||!$("#password").val())o.find("p").translateText("[[error:invalid-username-or-password]]"),o.show();else{if(o.hide(),r.hasClass("disabled"))return;r.addClass("disabled"),d.fire("action:app.login"),a.ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},beforeSend:function(){app.flags._login=!0},success:function(s){d.fire("action:app.loggedIn",s);const i=utils.urlToLocation(s.next).pathname,t=utils.params({url:s.next});t.loggedin=!0,delete t.register;const m=decodeURIComponent($.param(t));window.location.href=i+"?"+m},error:function(s){let i=s.responseText;const t=s.responseJSON;s.status===403&&s.responseText==="Forbidden"?window.location.href=config.relative_path+"/login?error=csrf-invalid":t&&t.hasOwnProperty("banned_until")&&(i=t.banned_until?g.compile("error:user-banned-reason-until",new Date(t.banned_until).toLocaleString(),t.reason):"[[error:user-banned-reason, "+t.reason+"]]"),o.find("p").translateText(i),o.show(),r.removeClass("disabled"),$("#password:focus").length&&$("#password").select()}})}}),e.capsLockCheck(document.querySelector("#password"),document.querySelector("#caps-lock-warning")),$("#login-error-notify button").on("click",function(n){return n.preventDefault(),o.hide(),!1}),$("#content #username").val()?$("#content #password").val("").focus():$("#content #username").focus(),$("#content #noscript").val("false")},e.capsLockCheck=(o,r)=>{const a=n=>{r.classList[n?"remove":"add"]("hidden"),r.parentNode.classList[n?"add":"remove"]("has-warning")};o&&(o.addEventListener("keyup",function(n){if(e._capsState&&n.key==="CapsLock"){a(!1),e._capsState=!e._capsState;return}e._capsState=n.getModifierState&&n.getModifierState("CapsLock"),a(e._capsState)}),e._capsState&&a(!0))},e}.apply(p,f),l!==void 0&&(u.exports=l)}}]);
