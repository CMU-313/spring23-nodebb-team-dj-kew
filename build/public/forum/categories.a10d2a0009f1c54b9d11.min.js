"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[4307,7214,6503,6623,9286,8786,5655],{64860:(m,y,f)=>{var g,l;g=[f(7237),f(50548),f(85233)],l=function(e,d,u){const c={};$(window).on("action:ajaxify.start",function(a,r){ajaxify.currentPage!==r.url&&socket.removeListener("event:new_post",c.onNewPost)}),c.init=function(){app.enterRoom("categories"),socket.removeListener("event:new_post",c.onNewPost),socket.on("event:new_post",c.onNewPost),d.init($('[component="category-selector"]'),{privilege:"find",onSelect:function(a){ajaxify.go("/category/"+a.cid)}}),$(".category-header").tooltip({placement:"bottom"})},c.onNewPost=function(a){a&&a.posts&&a.posts.length&&a.posts[0].topic&&i(a.posts[0].topic.cid,a.posts[0])};function i(a,r){const s=e.get("categories/category","cid",a),t=s.attr("data-numRecentReplies");if(!t||!parseInt(t,10)||!s.find('[component="topic/teaser"]').length)return;const o=s.find('[component="category/posts"]');app.parseAndTranslate("partials/categories/lastpost","posts",{posts:[r]},function(n){n.find(".post-content img:not(.not-responsive)").addClass("img-responsive"),n.hide(),o.length===0?n.appendTo(s):n.insertBefore(o.first()),n.fadeIn(),app.createUserTooltips(n),n.find(".timeago").timeago(),s.find('[component="category/posts"]').length>parseInt(t,10)&&o.last().remove(),u.fire("action:posts.loaded",{posts:[r]})})}return c}.apply(y,g),l!==void 0&&(m.exports=l)},7927:(m,y,f)=>{var g,l;g=[f(32230),f(7237),f(85233)],l=function(e,d,u){const c={};c.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const o=$("#"+t.alert_id);o.length?a(o,t):i(t)},c.success=function(t,o){c.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:o||5e3})},c.error=function(t,o){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}c.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:o||1e4})},c.remove=function(t){$("#alert_button_"+t).remove()};function i(t){app.parseAndTranslate("alert",t,function(o){let n=$("#"+t.alert_id);if(n.length)return a(n,t);n=o,n.fadeIn(200),d.get("toaster/tray").prepend(n),typeof t.closefn=="function"&&n.find("button").on("click",function(){return t.closefn(),r(n),!1}),t.timeout&&s(n,t),typeof t.clickfn=="function"&&n.addClass("pointer").on("click",function(p){$(p.target).is(".close")||t.clickfn(n,t),r(n)}),u.fire("action:alert.new",{alert:n,params:t})})}function a(t,o){t.find("strong").translateHtml(o.title),t.find("p").translateHtml(o.message),t.attr("class","alert alert-dismissable alert-"+o.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),o.timeout&&s(t,o),u.fire("action:alert.update",{alert:t,params:o}),t.off("click").removeClass("pointer"),typeof o.clickfn=="function"&&t.addClass("pointer").on("click",function(n){$(n.target).is(".close")||o.clickfn(),r(t)})}function r(t){t.fadeOut(500,function(){$(this).remove()})}function s(t,o){const n=o.timeout,p=setTimeout(function(){r(t),typeof o.timeoutfn=="function"&&o.timeoutfn(t,o)},n);t.attr("timeoutId",p),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(n+450)+"ms linear, background-color "+(n+450)+"ms ease-in"),t.addClass("animate"),u.fire("action:alert.animate",{alert:t,params:o})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return c}.apply(y,g),l!==void 0&&(m.exports=l)},22905:(m,y,f)=>{var g,l;g=[f(7927)],l=function(e){const d={};return d.init=function(u,c){let i=null;c=c||{},c.privilege=c.privilege||"topics:read",c.states=c.states||["watching","notwatching","ignoring"];let a=[];Array.isArray(c.localCategories)&&(a=c.localCategories.map(n=>({...n}))),c.selectedCids=c.selectedCids||ajaxify.data.selectedCids||[];const r=u.find('[component="category-selector-search"]');if(!r.length)return;const s=r.parent('[component="category/dropdown"]').length>0||r.parent('[component="category-selector"]').length>0;u.on("show.bs.dropdown",function(){s&&(u.find(".dropdown-toggle").addClass("hidden"),r.removeClass("hidden"));function n(){const p=r.find("input").val();p.length>1||!p&&!i?t(p,function(h){i=i||h,o(h)}):!p&&i&&(i.forEach(function(h){h.selected=c.selectedCids.includes(h.cid)}),o(i))}r.on("click",function(p){p.preventDefault(),p.stopPropagation()}),r.find("input").val("").on("keyup",utils.debounce(n,300)),n()}),u.on("shown.bs.dropdown",function(){r.find("input").focus()}),u.on("hide.bs.dropdown",function(){s&&(u.find(".dropdown-toggle").removeClass("hidden"),r.addClass("hidden")),r.off("click"),r.find("input").off("keyup")});function t(n,p){socket.emit("categories.categorySearch",{search:n,query:utils.params(),parentCid:c.parentCid||0,selectedCids:c.selectedCids,privilege:c.privilege,states:c.states,showLinks:c.showLinks},function(h,C){if(h)return e.error(h);p(a.concat(C))})}function o(n){app.parseAndTranslate(c.template,{categoryItems:n.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(p){u.find('[component="category/list"]').replaceWith(p.find('[component="category/list"]')),u.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!n.length)})}},d}.apply(y,g),l!==void 0&&(m.exports=l)},50548:(m,y,f)=>{var g,l;g=[f(22905),f(31369),f(85233)],l=function(e,d,u){const c={};return c.init=function(i,a){if(!i||!i.length)return;a=a||{};const r=a.onSelect||function(){};a.states=a.states||["watching","notwatching","ignoring"],a.template="partials/category-selector",u.fire("action:category.selector.options",{el:i,options:a}),e.init(i,a);const s={el:i,selectedCategory:null};i.on("click","[data-cid]",function(){const o=$(this);if(o.hasClass("disabled"))return!1;s.selectCategory(o.attr("data-cid")),r(s.selectedCategory)});const t=s.el.find('[component="category-selector-selected"]').html();return s.selectCategory=function(o){const n=s.el.find('[data-cid="'+o+'"]');s.selectedCategory={cid:o,name:n.attr("data-name")},n.length?s.el.find('[component="category-selector-selected"]').html(n.find('[component="category-markup"]').html()):s.el.find('[component="category-selector-selected"]').html(t)},s.getSelectedCategory=function(){return s.selectedCategory},s.getSelectedCid=function(){return s.selectedCategory?s.selectedCategory.cid:0},s},c.modal=function(i){i=i||{},i.onSelect=i.onSelect||function(){},i.onSubmit=i.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:i.message},function(a){const r=d.dialog({title:i.title||"[[modules:composer.select_category]]",message:a,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:t}}}),s=c.init(r.find('[component="category-selector"]'),i);function t(o){return o.preventDefault(),s.selectedCategory&&(i.onSubmit(s.selectedCategory),r.modal("hide")),!1}i.openOnLoad&&r.on("shown.bs.modal",function(){r.find(".dropdown-toggle").dropdown("toggle")}),r.find("form").on("submit",t)})},c}.apply(y,g),l!==void 0&&(m.exports=l)},7237:(m,y,f)=>{var g;g=function(){const l={};return l.core={"topic/teaser":function(e){return e?$('[component="category/topic"][data-tid="'+e+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(e,d){return $('[component="topic"][data-'+e+'="'+d+'"]')},post:function(e,d){return $('[component="post"][data-'+e+'="'+d+'"]')},"post/content":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/content"]')},"post/header":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/header"]')},"post/anchor":function(e){return $('[component="post"][data-index="'+e+'"] [component="post/anchor"]')},"post/vote-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/vote-count"]')},"post/bookmark-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/bookmark-count"]')},"user/postcount":function(e){return $('[component="user/postcount"][data-uid="'+e+'"]')},"user/reputation":function(e){return $('[component="user/reputation"][data-uid="'+e+'"]')},"category/topic":function(e,d){return $('[component="category/topic"][data-'+e+'="'+d+'"]')},"categories/category":function(e,d){return $('[component="categories/category"][data-'+e+'="'+d+'"]')},"chat/message":function(e){return $('[component="chat/message"][data-mid="'+e+'"]')},"chat/message/body":function(e){return $('[component="chat/message"][data-mid="'+e+'"] [component="chat/message/body"]')},"chat/recent/room":function(e){return $('[component="chat/recent/room"][data-roomid="'+e+'"]')}},l.get=function(){const e=Array.prototype.slice.call(arguments,1);return l.core[arguments[0]]&&e.length?l.core[arguments[0]].apply(this,e):$('[component="'+arguments[0]+'"]')},l}.call(y,f,y,m),g!==void 0&&(m.exports=g)}}]);
