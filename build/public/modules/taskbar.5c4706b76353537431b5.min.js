"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[3034],{27145:(l,k,c)=>{l=c.nmd(l);var f,d;f=[c(59006),c(32230),c(85233)],d=function(p,b,u){const a={};a.init=function(){const t=this;p.render("modules/taskbar",{}).then(function(s){t.taskbar=$(s),t.tasklist=t.taskbar.find("ul"),$(document.body).append(t.taskbar),t.taskbar.on("click","li",async function(){const i=$(this),n=i.attr("data-module"),e=i.attr("data-uuid"),o=await app.require(n);return i.hasClass("active")?o.minimize(e):(m(),o.load(e),a.toggleNew(e,!1),a.tasklist.removeClass("active"),i.addClass("active")),!1})}),$(window).on("action:app.loggedOut",function(){a.closeAll()})},a.close=async function(t,s){const i=a.tasklist.find('[data-module="'+l+'"][data-uuid="'+s+'"]');let n="close";if(t==="chat"&&(n="closeByUUID"),i.length){const e=await app.require(t);e&&typeof e[n]=="function"&&e[n](s)}},a.closeAll=function(t){let s="[data-uuid]";t&&(s='[data-module="'+t+'"]'+s),a.tasklist.find(s).each(function(i,n){a.close(t||n.getAttribute("data-module"),n.getAttribute("data-uuid"))})},a.discard=function(t,s){a.tasklist.find('[data-module="'+t+'"][data-uuid="'+s+'"]').remove(),r()},a.push=function(t,s,i,n){n=n||function(){};const e=a.tasklist.find('li[data-uuid="'+s+'"]'),o={module:t,uuid:s,options:i,element:e};u.fire("filter:taskbar.push",o),!e.length&&o.module?g(o,n):n(e)},a.get=function(t){return $('[data-module="'+t+'"]').map(function(i,n){return $(n).data()})},a.minimize=function(t,s){a.tasklist.find('[data-module="'+t+'"][data-uuid="'+s+'"]').toggleClass("active",!1)},a.toggleNew=function(t,s,i){a.tasklist.find('[data-uuid="'+t+'"]').toggleClass("new",s),i||u.fire("action:taskbar.toggleNew",t)},a.updateActive=function(t){const s=a.tasklist.find("li");s.removeClass("active"),s.filter('[data-uuid="'+t+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+t+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},a.isActive=function(t){return a.tasklist.find('li[data-uuid="'+t+'"]').hasClass("active")};function r(){a.tasklist.find("li").length>0?a.taskbar.attr("data-active","1"):a.taskbar.removeAttr("data-active")}function m(){a.tasklist.find(".active").removeClass("active")}function g(t,s){b.translate(t.options.title,function(i){const n=$("<div></div>").text(i||"NodeBB Task").html(),e=$("<li></li>").addClass(t.options.className).html('<a href="#"'+(t.options.image?` style="background-image: url('`+t.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(t.options.icon?'<i class="fa '+t.options.icon+'"></i> ':"")+'<span aria-label="'+n+'" component="taskbar/title">'+n+"</span></a>").attr({title:n,"data-module":t.module,"data-uuid":t.uuid}).addClass(t.options.state!==void 0?t.options.state:"active");(!t.options.state||t.options.state==="active")&&m(),a.tasklist.append(e),r(),t.element=e,e.data(t),u.fire("action:taskbar.pushed",t),s(e)})}const h=function(t,s,i){switch(s){case"title":t.find('[component="taskbar/title"]').text(i);break;case"icon":t.find("i").attr("class","fa fa-"+i);break;case"image":t.find("a").css("background-image",i?'url("'+i.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":t.find("a").css("background-color",i);break}};return a.update=function(t,s,i){const n=a.tasklist.find('[data-module="'+t+'"][data-uuid="'+s+'"]');if(!n.length)return;const e=n.data();Object.keys(i).forEach(function(o){e[o]=i[o],h(n,o,i[o])}),n.data(e)},a}.apply(k,f),d!==void 0&&(l.exports=d)}}]);
