"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[7986,2735],{99398:(d,g,p)=>{var f,v;f=[p(83713)],v=function(h){var i={};return i.insertIntoTextarea=function(e,t){var n={context:this,textarea:e,value:t,preventDefault:!1};if($(window).trigger("action:composer.insertIntoTextarea",n),!n.preventDefault){var r=$(n.textarea),a=r.val(),s=r.parents('[component="composer"]');r.val(a.slice(0,n.textarea.selectionStart)+n.value+a.slice(n.textarea.selectionStart)),h.render(s)}},i.wrapSelectionInTextareaWith=function(e,t,n){var r={context:this,textarea:e,leading:t,trailing:n,preventDefault:!1};if($(window).trigger("action:composer.wrapSelectionInTextareaWith",r),!r.preventDefault){n===void 0&&(n=t);var a=$(e),s=a.val(),o=/^(\s*)([\s\S]*?)(\s*)$/.exec(s.slice(e.selectionStart,e.selectionEnd));return o[2]||(o=[null,"",s.slice(e.selectionStart,e.selectionEnd),""]),a.val(s.slice(0,e.selectionStart)+o[1]+t+o[2]+n+o[3]+s.slice(e.selectionEnd)),[o[1].length,o[3].length]}},i.updateTextareaSelection=function(e,t,n){var r={context:this,textarea:e,start:t,end:n,preventDefault:!1};$(window).trigger("action:composer.updateTextareaSelection",r),!r.preventDefault&&(e.setSelectionRange(r.start,r.end),$(r.textarea).focus())},i.getBlockData=function(e,t,n){var r=e.value;t=t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");var a=new RegExp(t,"g"),s,o=[],c;for(r=r.split(`
`).reduce(function(l,u){return l!==null||(l=n<=u.length?u:null,l===null&&(n-=u.length+1)),l},null);(s=a.exec(r))!==null;)o.push(s.index);return c={in:!!(o.reduce(function(l,u){return n>=u+2&&(l+=1),l},0)%2),atEnd:o.reduce(function(l,u){return l||n===u},!1)},c.atEnd=c.in?c.atEnd:!1,c},i}.apply(g,f),v!==void 0&&(d.exports=v)},83713:(d,g,p)=>{var f,v;f=[p(85233)],v=function(h){var i={};return i.render=function(e,t){if(t=t||function(){},!e.find(".preview-container").is(":visible"))return t();var n=e.find("textarea");socket.emit("plugins.composer.renderPreview",n.val(),function(r,a){r||(a=$("<div>"+a+"</div>"),a.find("img:not(.not-responsive)").addClass("img-responsive"),e.find(".preview").html(a),h.fire("action:composer.preview"),t())})},i.matchScroll=function(e){if(e.find(".preview-container").is(":visible")){var t=e.find("textarea"),n=e.find(".preview");if(t.length&&n.length){var r=t[0].scrollHeight-t.height();if(r===0)return;var a=t.scrollTop()/r;n.scrollTop(Math.max(n[0].scrollHeight-n.height(),0)*a)}}},i.handleToggler=function(e){i.env=utils.findBootstrapEnvironment();var t=e.find(".write-container .toggle-preview"),n=e.find(".preview-container .toggle-preview"),r=$(".preview-container"),a=$(".write-container");function s(){c(!1),i.env!=="xs"&&i.env!=="sm"&&localStorage.setItem("composer:previewToggled",!0)}function o(){c(!0),i.env!=="xs"&&i.env!=="sm"&&localStorage.removeItem("composer:previewToggled")}function c(l){i.env==="xs"||i.env==="sm"?(r.toggleClass("hide",!1),a.toggleClass("maximized",!1),t.toggleClass("hide",!0),r.toggleClass("hidden-xs hidden-sm",!l),a.toggleClass("hidden-xs hidden-sm",l),l&&i.render(e)):(r.toggleClass("hide",!l),a.toggleClass("maximized",!l),t.toggleClass("hide",l)),i.matchScroll(e)}i.toggle=c,n.on("click",function(){s(),e.find(".write").focus()}),t.on("click",function(){o(),e.find(".write").focus()}),localStorage.getItem("composer:previewToggled")||i.env==="xs"||i.env==="sm"?s():o()},i}.apply(g,f),v!==void 0&&(d.exports=v)}}]);
