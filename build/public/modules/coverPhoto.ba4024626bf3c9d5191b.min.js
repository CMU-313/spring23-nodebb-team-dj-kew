(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[8529,7214,6503,8786,5655],{7927:(d,g,l)=>{"use strict";var p,f;p=[l(32230),l(7237),l(85233)],f=function(o,n,s){const e={};e.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const r=$("#"+t.alert_id);r.length?a(r,t):i(t)},e.success=function(t,r){e.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:r||5e3})},e.error=function(t,r){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}e.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:r||1e4})},e.remove=function(t){$("#alert_button_"+t).remove()};function i(t){app.parseAndTranslate("alert",t,function(r){let c=$("#"+t.alert_id);if(c.length)return a(c,t);c=r,c.fadeIn(200),n.get("toaster/tray").prepend(c),typeof t.closefn=="function"&&c.find("button").on("click",function(){return t.closefn(),u(c),!1}),t.timeout&&m(c,t),typeof t.clickfn=="function"&&c.addClass("pointer").on("click",function(h){$(h.target).is(".close")||t.clickfn(c,t),u(c)}),s.fire("action:alert.new",{alert:c,params:t})})}function a(t,r){t.find("strong").translateHtml(r.title),t.find("p").translateHtml(r.message),t.attr("class","alert alert-dismissable alert-"+r.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),r.timeout&&m(t,r),s.fire("action:alert.update",{alert:t,params:r}),t.off("click").removeClass("pointer"),typeof r.clickfn=="function"&&t.addClass("pointer").on("click",function(c){$(c.target).is(".close")||r.clickfn(),u(t)})}function u(t){t.fadeOut(500,function(){$(this).remove()})}function m(t,r){const c=r.timeout,h=setTimeout(function(){u(t),typeof r.timeoutfn=="function"&&r.timeoutfn(t,r)},c);t.attr("timeoutId",h),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(c+450)+"ms linear, background-color "+(c+450)+"ms ease-in"),t.addClass("animate"),s.fire("action:alert.animate",{alert:t,params:r})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return e}.apply(g,p),f!==void 0&&(d.exports=f)},7237:(d,g,l)=>{"use strict";var p;p=function(){const f={};return f.core={"topic/teaser":function(o){return o?$('[component="category/topic"][data-tid="'+o+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(o,n){return $('[component="topic"][data-'+o+'="'+n+'"]')},post:function(o,n){return $('[component="post"][data-'+o+'="'+n+'"]')},"post/content":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/content"]')},"post/header":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/header"]')},"post/anchor":function(o){return $('[component="post"][data-index="'+o+'"] [component="post/anchor"]')},"post/vote-count":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/vote-count"]')},"post/bookmark-count":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/bookmark-count"]')},"user/postcount":function(o){return $('[component="user/postcount"][data-uid="'+o+'"]')},"user/reputation":function(o){return $('[component="user/reputation"][data-uid="'+o+'"]')},"category/topic":function(o,n){return $('[component="category/topic"][data-'+o+'="'+n+'"]')},"categories/category":function(o,n){return $('[component="categories/category"][data-'+o+'="'+n+'"]')},"chat/message":function(o){return $('[component="chat/message"][data-mid="'+o+'"]')},"chat/message/body":function(o){return $('[component="chat/message"][data-mid="'+o+'"] [component="chat/message/body"]')},"chat/recent/room":function(o){return $('[component="chat/recent/room"][data-roomid="'+o+'"]')}},f.get=function(){const o=Array.prototype.slice.call(arguments,1);return f.core[arguments[0]]&&o.length?f.core[arguments[0]].apply(this,o):$('[component="'+arguments[0]+'"]')},f}.call(g,l,g,d),p!==void 0&&(d.exports=p)},38565:(d,g,l)=>{"use strict";var p,f;p=[l(7927),l(80034)],f=function(o){const n={coverEl:null,saveFn:null};n.init=function(e,i,a,u){n.coverEl=e,n.saveFn=i,e.find(".upload").on("click",a),e.find(".resize").on("click",function(){s(e)}),e.find(".remove").on("click",u),e.on("dragover",n.onDragOver).on("drop",n.onDrop),e.find(".save").on("click",n.save),e.addClass("initialised")},n.onDragOver=function(e){e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy"},n.onDrop=function(e){e.stopPropagation(),e.preventDefault();const i=e.originalEvent.dataTransfer.files,a=new FileReader;i.length&&i[0].type.match("image.*")&&(a.onload=function(u){n.coverEl.css("background-image","url("+u.target.result+")"),n.newCover=u.target.result},a.readAsDataURL(i[0]),s(n.coverEl))};function s(e){e.toggleClass("active",1).backgroundDraggable({axis:"y",units:"percent"}),o.alert({alert_id:"drag_start",title:"[[modules:cover.dragging_title]]",message:"[[modules:cover.dragging_message]]",timeout:5e3})}return n.save=function(){n.coverEl.addClass("saving"),n.saveFn(n.newCover||void 0,n.coverEl.css("background-position"),function(e){e?o.error(e):(n.coverEl.toggleClass("active",0),n.coverEl.backgroundDraggable("disable"),n.coverEl.off("dragover",n.onDragOver),n.coverEl.off("drop",n.onDrop),o.success("[[modules:cover.saved]]")),n.coverEl.removeClass("saving")})},n}.apply(g,p),f!==void 0&&(d.exports=f)},80034:()=>{(function(d){var g=d(window),l=function(n,s,e,i){if(arguments.length===3||i){if(e<n)return n;if(e>s)return s}return e},p=function(n){n.clientX=n.originalEvent.touches[0].clientX,n.clientY=n.originalEvent.touches[0].clientY},f=function(n){var s=(n.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1];if(s){var e={width:0,height:0},i=new Image;return i.onload=function(){if(n.css("background-size")=="cover"){var a=n.innerWidth(),u=n.innerHeight(),m=a/u;imageAspectRatio=i.width/i.height,scale=1,imageAspectRatio>=m?scale=u/i.height:scale=a/i.width,e.width=i.width*scale,e.height=i.height*scale}else e.width=i.width,e.height=i.height},i.src=s,e}};function o(n,s){this.element=n,this.options=s,this.init()}o.prototype.init=function(){var n=d(this.element),s=(n.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1],e=this.options;if(s){var i={width:0,height:0};(e.bound||e.units=="percent")&&(i=f(n)),n.on("mousedown.dbg touchstart.dbg",function(a){if(a.target===n[0]){if(a.preventDefault(),a.originalEvent.touches)p(a);else if(a.which!==1)return;var u=a.clientX,m=a.clientY,t=n.css("background-position").match(/(-?\d+).*?\s(-?\d+)/)||[],r=parseInt(t[1])||0,c=parseInt(t[2])||0;e.units=="percent"&&(r=Math.round(r/-200*i.width),c=Math.round(c/-200*i.height)),g.on("mousemove.dbg touchmove.dbg",function(h){h.preventDefault(),h.originalEvent.touches&&p(h);var v=h.clientX,b=h.clientY;e.units=="percent"?(r=e.axis==="y"?r:l(-i.width/2,0,r+v-u,e.bound),c=e.axis==="x"?c:l(-i.height/2,0,c+b-m,e.bound),n.css("background-position",r/i.width*-200+"% "+c/i.height*-200+"%")):(r=e.axis==="y"?r:l(n.innerWidth()-i.width,0,r+v-u,e.bound),c=e.axis==="x"?c:l(n.innerHeight()-i.height,0,c+b-m,e.bound),n.css("background-position",r+"px "+c+"px")),u=v,m=b}),g.on("mouseup.dbg touchend.dbg mouseleave.dbg",function(){e.done&&e.done(),g.off("mousemove.dbg touchmove.dbg"),g.off("mouseup.dbg touchend.dbg mouseleave.dbg")})}})}},o.prototype.disable=function(){var n=d(this.element);n.off("mousedown.dbg touchstart.dbg"),g.off("mousemove.dbg touchmove.dbg mouseup.dbg touchend.dbg mouseleave.dbg")},d.fn.backgroundDraggable=function(s){var s=s,e=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=d(this);if(typeof s>"u"||typeof s=="object"){s=d.extend({},d.fn.backgroundDraggable.defaults,s);var a=new o(this,s);i.data("dbg",a)}else if(typeof s=="string"&&i.data("dbg")){var a=i.data("dbg");o.prototype[s].apply(a,e)}})},d.fn.backgroundDraggable.defaults={bound:!0,axis:void 0,units:"pixels"}})(jQuery)}}]);
