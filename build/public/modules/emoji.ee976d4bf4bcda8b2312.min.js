(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1322],{40646:(b,E,u)=>{var A,d;A=[u,E],d=function(W,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.strategy=t.search=t.table=t.buildEmoji=t.buster=t.base=void 0;var v=config.assetBaseUrl+"/plugins/nodebb-plugin-emoji";t.base=v;var m=config["cache-buster"];t.buster=m;function g(n,a){var c=":"+n.name+":",o=a?" defer":"";return n.image?`<img
      `+(a?"data-":"")+'src="'+v+"/emoji/"+n.pack+"/"+n.image+"?"+m+`"
      class="not-responsive emoji emoji-`+n.pack+" emoji--"+n.name+" "+o+`"
      title="`+c+`"
      alt="`+n.character+`"
    />`:`<span
    class="emoji-`+n.pack+" emoji--"+n.name+`"
    title="`+c+`"
  ><span>`+n.character+"</span></span>"}t.buildEmoji=g,t.strategy={match:/\B:([^\s\n:]+)$/,search:function(n,a){a(t.search(n.toLowerCase().replace(/[_-]/g,"")).slice(0,10))},index:1,replace:function(n){return":"+n.name+": "},template:function(n){return g(n)+" "+n.name},cache:!0};var h;function y(n){return h=h||Promise.all([new Promise(function(a,c){u.e(2645).then(function(){var o=[u(91919)];a.apply(null,o)}.bind(this)).catch(c.bind(this))}),new Promise(function(a,c){u.e(320).then(function(){var o=[u(78726)];a.apply(null,o)}.bind(this)).catch(c.bind(this))}),new Promise(function(a,c){Promise.all([u.e(6177),u.e(2526),u.e(5482),u.e(588)]).then(function(){var o=[u(45482)];a.apply(null,o)}.bind(this)).catch(c.bind(this))}),$.getJSON(v+"/emoji/table.json?"+m)]).then(function(a){var c=a[0],o=a[1],P=a[2],C=a[3];t.table=C;var D=Object.keys(t.table).map(function(s){var i=t.table[s];return{name:s,aliases:i.aliases,keywords:i.keywords,character:i.character,image:i.image,pack:i.pack}});function R(s,i){for(var e=i.length,r=0;r<e;r+=1)if(c(s,i[r]))return i[r];return null}function B(s){function i(e,r){var l=r*(1+o(s,e));return e.startsWith(s)?l-2:l}return D.filter(function(e){if(c(s,e.name))return e.score=i(e.name,1),!0;var r=R(s,e.aliases);if(r)return e.score=i(r,3),!0;var l=R(s,e.keywords);return l?(e.score=i(l,7),!0):!1}).sort(function(e,r){return e.score-r.score}).sort(function(e,r){var l=+e.name.startsWith(s),f=+r.name.startsWith(s);return f-l})}t.search=B,P.addButtonDispatch("emoji-add-emoji",function(s,i,e,r){new Promise(function(l,f){u.e(5400).then(function(){var M=[u(6721)];l.apply(null,M)}.bind(this)).catch(f.bind(this))}).then(function(l){var f=l.toggleForInsert;return f(s,i,e,r)})})}).catch(function(a){var c=Error("[[emoji:meta-load-failed]]");throw console.error(c),app.alertError(c),a}),n&&h.then(function(){return setTimeout(n,0)}),h}t.init=y}.apply(E,A),d!==void 0&&(b.exports=d)}}]);
