"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[7931,7214,9617,6503,3014,2735,8786,5655,3034,831],{7927:(m,k,g)=>{var p,d;p=[g(32230),g(7237),g(85233)],d=function(o,s,l){const n={};n.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const e=$("#"+t.alert_id);e.length?c(e,t):a(t)},n.success=function(t,e){n.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:e||5e3})},n.error=function(t,e){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}n.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:e||1e4})},n.remove=function(t){$("#alert_button_"+t).remove()};function a(t){app.parseAndTranslate("alert",t,function(e){let i=$("#"+t.alert_id);if(i.length)return c(i,t);i=e,i.fadeIn(200),s.get("toaster/tray").prepend(i),typeof t.closefn=="function"&&i.find("button").on("click",function(){return t.closefn(),r(i),!1}),t.timeout&&h(i,t),typeof t.clickfn=="function"&&i.addClass("pointer").on("click",function(u){$(u.target).is(".close")||t.clickfn(i,t),r(i)}),l.fire("action:alert.new",{alert:i,params:t})})}function c(t,e){t.find("strong").translateHtml(e.title),t.find("p").translateHtml(e.message),t.attr("class","alert alert-dismissable alert-"+e.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),e.timeout&&h(t,e),l.fire("action:alert.update",{alert:t,params:e}),t.off("click").removeClass("pointer"),typeof e.clickfn=="function"&&t.addClass("pointer").on("click",function(i){$(i.target).is(".close")||e.clickfn(),r(t)})}function r(t){t.fadeOut(500,function(){$(this).remove()})}function h(t,e){const i=e.timeout,u=setTimeout(function(){r(t),typeof e.timeoutfn=="function"&&e.timeoutfn(t,e)},i);t.attr("timeoutId",u),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(i+450)+"ms linear, background-color "+(i+450)+"ms ease-in"),t.addClass("animate"),l.fire("action:alert.animate",{alert:t,params:e})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return n}.apply(k,p),d!==void 0&&(m.exports=d)},74344:(m,k,g)=>{var p,d;p=[g(85233)],d=(o=>{const s={},l=config.relative_path+"/api/v3";function n(a,c){a.url=a.url.startsWith("/api")?config.relative_path+a.url:l+a.url;async function r(h){({options:a}=await o.fire("filter:api.options",{options:a})),$.ajax(a).done(t=>{h(null,t&&t.hasOwnProperty("status")&&t.hasOwnProperty("response")?t.response:t||{})}).fail(t=>{let e;t.responseJSON&&(e=t.responseJSON.status&&t.responseJSON.status.message?t.responseJSON.status.message:t.responseJSON.error),h(new Error(e||t.statusText))})}if(typeof c=="function"){r(c);return}return new Promise((h,t)=>{r(function(e,i){e?t(e):h(i)})})}return s.get=(a,c,r)=>n({url:a+(c&&Object.keys(c).length?"?"+$.param(c):"")},r),s.head=(a,c,r)=>n({url:a+(c&&Object.keys(c).length?"?"+$.param(c):""),method:"head"},r),s.post=(a,c,r)=>n({url:a,method:"post",data:JSON.stringify(c||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},r),s.patch=(a,c,r)=>n({url:a,method:"patch",data:JSON.stringify(c||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},r),s.put=(a,c,r)=>n({url:a,method:"put",data:JSON.stringify(c||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},r),s.del=(a,c,r)=>n({url:a,method:"delete",data:JSON.stringify(c),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},r),s.delete=s.del,s}).apply(k,p),d!==void 0&&(m.exports=d)},7237:(m,k,g)=>{var p;p=function(){const d={};return d.core={"topic/teaser":function(o){return o?$('[component="category/topic"][data-tid="'+o+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(o,s){return $('[component="topic"][data-'+o+'="'+s+'"]')},post:function(o,s){return $('[component="post"][data-'+o+'="'+s+'"]')},"post/content":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/content"]')},"post/header":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/header"]')},"post/anchor":function(o){return $('[component="post"][data-index="'+o+'"] [component="post/anchor"]')},"post/vote-count":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/vote-count"]')},"post/bookmark-count":function(o){return $('[component="post"][data-pid="'+o+'"] [component="post/bookmark-count"]')},"user/postcount":function(o){return $('[component="user/postcount"][data-uid="'+o+'"]')},"user/reputation":function(o){return $('[component="user/reputation"][data-uid="'+o+'"]')},"category/topic":function(o,s){return $('[component="category/topic"][data-'+o+'="'+s+'"]')},"categories/category":function(o,s){return $('[component="categories/category"][data-'+o+'="'+s+'"]')},"chat/message":function(o){return $('[component="chat/message"][data-mid="'+o+'"]')},"chat/message/body":function(o){return $('[component="chat/message"][data-mid="'+o+'"] [component="chat/message/body"]')},"chat/recent/room":function(o){return $('[component="chat/recent/room"][data-roomid="'+o+'"]')}},d.get=function(){const o=Array.prototype.slice.call(arguments,1);return d.core[arguments[0]]&&o.length?d.core[arguments[0]].apply(this,o):$('[component="'+arguments[0]+'"]')},d}.call(k,g,k,m),p!==void 0&&(m.exports=p)},83713:(m,k,g)=>{var p,d;p=[g(85233)],d=function(o){var s={};return s.render=function(l,n){if(n=n||function(){},!l.find(".preview-container").is(":visible"))return n();var a=l.find("textarea");socket.emit("plugins.composer.renderPreview",a.val(),function(c,r){c||(r=$("<div>"+r+"</div>"),r.find("img:not(.not-responsive)").addClass("img-responsive"),l.find(".preview").html(r),o.fire("action:composer.preview"),n())})},s.matchScroll=function(l){if(l.find(".preview-container").is(":visible")){var n=l.find("textarea"),a=l.find(".preview");if(n.length&&a.length){var c=n[0].scrollHeight-n.height();if(c===0)return;var r=n.scrollTop()/c;a.scrollTop(Math.max(a[0].scrollHeight-a.height(),0)*r)}}},s.handleToggler=function(l){s.env=utils.findBootstrapEnvironment();var n=l.find(".write-container .toggle-preview"),a=l.find(".preview-container .toggle-preview"),c=$(".preview-container"),r=$(".write-container");function h(){e(!1),s.env!=="xs"&&s.env!=="sm"&&localStorage.setItem("composer:previewToggled",!0)}function t(){e(!0),s.env!=="xs"&&s.env!=="sm"&&localStorage.removeItem("composer:previewToggled")}function e(i){s.env==="xs"||s.env==="sm"?(c.toggleClass("hide",!1),r.toggleClass("maximized",!1),n.toggleClass("hide",!0),c.toggleClass("hidden-xs hidden-sm",!i),r.toggleClass("hidden-xs hidden-sm",i),i&&s.render(l)):(c.toggleClass("hide",!i),r.toggleClass("maximized",!i),n.toggleClass("hide",i)),s.matchScroll(l)}s.toggle=e,a.on("click",function(){h(),l.find(".write").focus()}),n.on("click",function(){t(),l.find(".write").focus()}),localStorage.getItem("composer:previewToggled")||s.env==="xs"||s.env==="sm"?h():t()},s}.apply(k,p),d!==void 0&&(m.exports=d)},27145:(m,k,g)=>{m=g.nmd(m);var p,d;p=[g(59006),g(32230),g(85233)],d=function(o,s,l){const n={};n.init=function(){const t=this;o.render("modules/taskbar",{}).then(function(e){t.taskbar=$(e),t.tasklist=t.taskbar.find("ul"),$(document.body).append(t.taskbar),t.taskbar.on("click","li",async function(){const i=$(this),u=i.attr("data-module"),f=i.attr("data-uuid"),v=await app.require(u);return i.hasClass("active")?v.minimize(f):(c(),v.load(f),n.toggleNew(f,!1),n.tasklist.removeClass("active"),i.addClass("active")),!1})}),$(window).on("action:app.loggedOut",function(){n.closeAll()})},n.close=async function(t,e){const i=n.tasklist.find('[data-module="'+m+'"][data-uuid="'+e+'"]');let u="close";if(t==="chat"&&(u="closeByUUID"),i.length){const f=await app.require(t);f&&typeof f[u]=="function"&&f[u](e)}},n.closeAll=function(t){let e="[data-uuid]";t&&(e='[data-module="'+t+'"]'+e),n.tasklist.find(e).each(function(i,u){n.close(t||u.getAttribute("data-module"),u.getAttribute("data-uuid"))})},n.discard=function(t,e){n.tasklist.find('[data-module="'+t+'"][data-uuid="'+e+'"]').remove(),a()},n.push=function(t,e,i,u){u=u||function(){};const f=n.tasklist.find('li[data-uuid="'+e+'"]'),v={module:t,uuid:e,options:i,element:f};l.fire("filter:taskbar.push",v),!f.length&&v.module?r(v,u):u(f)},n.get=function(t){return $('[data-module="'+t+'"]').map(function(i,u){return $(u).data()})},n.minimize=function(t,e){n.tasklist.find('[data-module="'+t+'"][data-uuid="'+e+'"]').toggleClass("active",!1)},n.toggleNew=function(t,e,i){n.tasklist.find('[data-uuid="'+t+'"]').toggleClass("new",e),i||l.fire("action:taskbar.toggleNew",t)},n.updateActive=function(t){const e=n.tasklist.find("li");e.removeClass("active"),e.filter('[data-uuid="'+t+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+t+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},n.isActive=function(t){return n.tasklist.find('li[data-uuid="'+t+'"]').hasClass("active")};function a(){n.tasklist.find("li").length>0?n.taskbar.attr("data-active","1"):n.taskbar.removeAttr("data-active")}function c(){n.tasklist.find(".active").removeClass("active")}function r(t,e){s.translate(t.options.title,function(i){const u=$("<div></div>").text(i||"NodeBB Task").html(),f=$("<li></li>").addClass(t.options.className).html('<a href="#"'+(t.options.image?` style="background-image: url('`+t.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(t.options.icon?'<i class="fa '+t.options.icon+'"></i> ':"")+'<span aria-label="'+u+'" component="taskbar/title">'+u+"</span></a>").attr({title:u,"data-module":t.module,"data-uuid":t.uuid}).addClass(t.options.state!==void 0?t.options.state:"active");(!t.options.state||t.options.state==="active")&&c(),n.tasklist.append(f),a(),t.element=f,f.data(t),l.fire("action:taskbar.pushed",t),e(f)})}const h=function(t,e,i){switch(e){case"title":t.find('[component="taskbar/title"]').text(i);break;case"icon":t.find("i").attr("class","fa fa-"+i);break;case"image":t.find("a").css("background-image",i?'url("'+i.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":t.find("a").css("background-color",i);break}};return n.update=function(t,e,i){const u=n.tasklist.find('[data-module="'+t+'"][data-uuid="'+e+'"]');if(!u.length)return;const f=u.data();Object.keys(i).forEach(function(v){f[v]=i[v],h(u,v,i[v])}),u.data(f)},n}.apply(k,p),d!==void 0&&(m.exports=d)}}]);
