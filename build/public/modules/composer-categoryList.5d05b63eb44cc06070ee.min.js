"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[4677,7214,9617,6503,3014,6623,9286,8786,5655,3034,831],{7927:(h,C,g)=>{var p,u;p=[g(32230),g(7237),g(85233)],u=function(c,f,m){const n={};n.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:new Date().getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const e=$("#"+t.alert_id);e.length?r(e,t):i(t)},n.success=function(t,e){n.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:e||5e3})},n.error=function(t,e){if(t=t&&t.message||t,t==="[[error:revalidate-failure]]"){socket.disconnect(),app.reconnect();return}n.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:e||1e4})},n.remove=function(t){$("#alert_button_"+t).remove()};function i(t){app.parseAndTranslate("alert",t,function(e){let o=$("#"+t.alert_id);if(o.length)return r(o,t);o=e,o.fadeIn(200),f.get("toaster/tray").prepend(o),typeof t.closefn=="function"&&o.find("button").on("click",function(){return t.closefn(),s(o),!1}),t.timeout&&l(o,t),typeof t.clickfn=="function"&&o.addClass("pointer").on("click",function(a){$(a.target).is(".close")||t.clickfn(o,t),s(o)}),m.fire("action:alert.new",{alert:o,params:t})})}function r(t,e){t.find("strong").translateHtml(e.title),t.find("p").translateHtml(e.message),t.attr("class","alert alert-dismissable alert-"+e.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),e.timeout&&l(t,e),m.fire("action:alert.update",{alert:t,params:e}),t.off("click").removeClass("pointer"),typeof e.clickfn=="function"&&t.addClass("pointer").on("click",function(o){$(o.target).is(".close")||e.clickfn(),s(t)})}function s(t){t.fadeOut(500,function(){$(this).remove()})}function l(t,e){const o=e.timeout,a=setTimeout(function(){s(t),typeof e.timeoutfn=="function"&&e.timeoutfn(t,e)},o);t.attr("timeoutId",a),t.css("transition-property","none"),t.removeClass("animate"),setTimeout(function(){t.css("transition-property",""),t.css("transition","width "+(o+450)+"ms linear, background-color "+(o+450)+"ms ease-in"),t.addClass("animate"),m.fire("action:alert.animate",{alert:t,params:e})},50),t.on("mouseenter",function(){$(this).css("transition-duration",0)})}return n}.apply(C,p),u!==void 0&&(h.exports=u)},74344:(h,C,g)=>{var p,u;p=[g(85233)],u=(c=>{const f={},m=config.relative_path+"/api/v3";function n(i,r){i.url=i.url.startsWith("/api")?config.relative_path+i.url:m+i.url;async function s(l){({options:i}=await c.fire("filter:api.options",{options:i})),$.ajax(i).done(t=>{l(null,t&&t.hasOwnProperty("status")&&t.hasOwnProperty("response")?t.response:t||{})}).fail(t=>{let e;t.responseJSON&&(e=t.responseJSON.status&&t.responseJSON.status.message?t.responseJSON.status.message:t.responseJSON.error),l(new Error(e||t.statusText))})}if(typeof r=="function"){s(r);return}return new Promise((l,t)=>{s(function(e,o){e?t(e):l(o)})})}return f.get=(i,r,s)=>n({url:i+(r&&Object.keys(r).length?"?"+$.param(r):"")},s),f.head=(i,r,s)=>n({url:i+(r&&Object.keys(r).length?"?"+$.param(r):""),method:"head"},s),f.post=(i,r,s)=>n({url:i,method:"post",data:JSON.stringify(r||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},s),f.patch=(i,r,s)=>n({url:i,method:"patch",data:JSON.stringify(r||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},s),f.put=(i,r,s)=>n({url:i,method:"put",data:JSON.stringify(r||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},s),f.del=(i,r,s)=>n({url:i,method:"delete",data:JSON.stringify(r),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},s),f.delete=f.del,f}).apply(C,p),u!==void 0&&(h.exports=u)},22905:(h,C,g)=>{var p,u;p=[g(7927)],u=function(c){const f={};return f.init=function(m,n){let i=null;n=n||{},n.privilege=n.privilege||"topics:read",n.states=n.states||["watching","notwatching","ignoring"];let r=[];Array.isArray(n.localCategories)&&(r=n.localCategories.map(o=>({...o}))),n.selectedCids=n.selectedCids||ajaxify.data.selectedCids||[];const s=m.find('[component="category-selector-search"]');if(!s.length)return;const l=s.parent('[component="category/dropdown"]').length>0||s.parent('[component="category-selector"]').length>0;m.on("show.bs.dropdown",function(){l&&(m.find(".dropdown-toggle").addClass("hidden"),s.removeClass("hidden"));function o(){const a=s.find("input").val();a.length>1||!a&&!i?t(a,function(d){i=i||d,e(d)}):!a&&i&&(i.forEach(function(d){d.selected=n.selectedCids.includes(d.cid)}),e(i))}s.on("click",function(a){a.preventDefault(),a.stopPropagation()}),s.find("input").val("").on("keyup",utils.debounce(o,300)),o()}),m.on("shown.bs.dropdown",function(){s.find("input").focus()}),m.on("hide.bs.dropdown",function(){l&&(m.find(".dropdown-toggle").removeClass("hidden"),s.addClass("hidden")),s.off("click"),s.find("input").off("keyup")});function t(o,a){socket.emit("categories.categorySearch",{search:o,query:utils.params(),parentCid:n.parentCid||0,selectedCids:n.selectedCids,privilege:n.privilege,states:n.states,showLinks:n.showLinks},function(d,y){if(d)return c.error(d);a(r.concat(y))})}function e(o){app.parseAndTranslate(n.template,{categoryItems:o.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(a){m.find('[component="category/list"]').replaceWith(a.find('[component="category/list"]')),m.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!o.length)})}},f}.apply(C,p),u!==void 0&&(h.exports=u)},50548:(h,C,g)=>{var p,u;p=[g(22905),g(31369),g(85233)],u=function(c,f,m){const n={};return n.init=function(i,r){if(!i||!i.length)return;r=r||{};const s=r.onSelect||function(){};r.states=r.states||["watching","notwatching","ignoring"],r.template="partials/category-selector",m.fire("action:category.selector.options",{el:i,options:r}),c.init(i,r);const l={el:i,selectedCategory:null};i.on("click","[data-cid]",function(){const e=$(this);if(e.hasClass("disabled"))return!1;l.selectCategory(e.attr("data-cid")),s(l.selectedCategory)});const t=l.el.find('[component="category-selector-selected"]').html();return l.selectCategory=function(e){const o=l.el.find('[data-cid="'+e+'"]');l.selectedCategory={cid:e,name:o.attr("data-name")},o.length?l.el.find('[component="category-selector-selected"]').html(o.find('[component="category-markup"]').html()):l.el.find('[component="category-selector-selected"]').html(t)},l.getSelectedCategory=function(){return l.selectedCategory},l.getSelectedCid=function(){return l.selectedCategory?l.selectedCategory.cid:0},l},n.modal=function(i){i=i||{},i.onSelect=i.onSelect||function(){},i.onSubmit=i.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:i.message},function(r){const s=f.dialog({title:i.title||"[[modules:composer.select_category]]",message:r,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:t}}}),l=n.init(s.find('[component="category-selector"]'),i);function t(e){return e.preventDefault(),l.selectedCategory&&(i.onSubmit(l.selectedCategory),s.modal("hide")),!1}i.openOnLoad&&s.on("shown.bs.modal",function(){s.find(".dropdown-toggle").dropdown("toggle")}),s.find("form").on("submit",t)})},n}.apply(C,p),u!==void 0&&(h.exports=u)},7237:(h,C,g)=>{var p;p=function(){const u={};return u.core={"topic/teaser":function(c){return c?$('[component="category/topic"][data-tid="'+c+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(c,f){return $('[component="topic"][data-'+c+'="'+f+'"]')},post:function(c,f){return $('[component="post"][data-'+c+'="'+f+'"]')},"post/content":function(c){return $('[component="post"][data-pid="'+c+'"] [component="post/content"]')},"post/header":function(c){return $('[component="post"][data-pid="'+c+'"] [component="post/header"]')},"post/anchor":function(c){return $('[component="post"][data-index="'+c+'"] [component="post/anchor"]')},"post/vote-count":function(c){return $('[component="post"][data-pid="'+c+'"] [component="post/vote-count"]')},"post/bookmark-count":function(c){return $('[component="post"][data-pid="'+c+'"] [component="post/bookmark-count"]')},"user/postcount":function(c){return $('[component="user/postcount"][data-uid="'+c+'"]')},"user/reputation":function(c){return $('[component="user/reputation"][data-uid="'+c+'"]')},"category/topic":function(c,f){return $('[component="category/topic"][data-'+c+'="'+f+'"]')},"categories/category":function(c,f){return $('[component="categories/category"][data-'+c+'="'+f+'"]')},"chat/message":function(c){return $('[component="chat/message"][data-mid="'+c+'"]')},"chat/message/body":function(c){return $('[component="chat/message"][data-mid="'+c+'"] [component="chat/message/body"]')},"chat/recent/room":function(c){return $('[component="chat/recent/room"][data-roomid="'+c+'"]')}},u.get=function(){const c=Array.prototype.slice.call(arguments,1);return u.core[arguments[0]]&&c.length?u.core[arguments[0]].apply(this,c):$('[component="'+arguments[0]+'"]')},u}.call(C,g,C,h),p!==void 0&&(h.exports=p)},98755:(h,C,g)=>{var p,u;p=[g(50548),g(27145),g(74344)],u=function(c,f,m){var n={},i;n.init=function(t,e){var o=t.find(".category-list-container");o.length&&(t.on("action:composer.resize",function(){r(t)}),n.updateTaskbar(t,e),i=c.init(o.find('[component="category-selector"]'),{privilege:"topics:create",states:["watching","notwatching","ignoring"],onSelect:function(a){e.hasOwnProperty("cid")&&l(t,e,a)}}),i&&(e.cid&&e.category?i.selectedCategory={cid:e.cid,name:e.category.name}:ajaxify.data.template.compose&&ajaxify.data.selectedCategory&&(i.selectedCategory={cid:ajaxify.data.cid,name:ajaxify.data.selectedCategory}),t.find(".category-name").translateText(i.selectedCategory?i.selectedCategory.name:"[[modules:composer.select_category]]").on("click",function(){c.modal({privilege:"topics:create",states:["watching","notwatching","ignoring"],openOnLoad:!0,showLinks:!1,onSelect:function(a){t.find(".category-name").text(a.name),i.selectCategory(a.cid),e.hasOwnProperty("cid")&&l(t,e,a)}})}),r(t)))};function r(t){t.find('.category-list-container [component="category-selector"]').toggleClass("dropup",t.outerHeight()<$(window).height()/2)}n.getSelectedCid=function(){var t;return i&&(t=i.getSelectedCategory()),t?t.cid:0},n.updateTaskbar=function(t,e){parseInt(e.cid,10)&&m.get(`/categories/${e.cid}`,{}).then(function(o){s(t,o)})};function s(t,e){if(e){var o=t.attr("data-uuid");f.update("composer",o,{image:e.backgroundImage,"background-color":e.bgColor,icon:e.icon&&e.icon.slice(3)})}}async function l(t,e,o){e.cid=o.cid;const a=await window.fetch(`${config.relative_path}/api/category/${o.cid}`).then(d=>d.json());e.category=a,s(t,a),g.e(3913).then(function(){var d=[g(98166),g(88186)];(function(y,k){y.onChangeCategory(a),k.onChangeCategory(t,e,o.cid,a),$(window).trigger("action:composer.changeCategory",{postContainer:t,postData:e,selectedCategory:o,categoryData:a})}).apply(null,d)}).catch(g.oe)}return n}.apply(C,p),u!==void 0&&(h.exports=u)},27145:(h,C,g)=>{h=g.nmd(h);var p,u;p=[g(59006),g(32230),g(85233)],u=function(c,f,m){const n={};n.init=function(){const t=this;c.render("modules/taskbar",{}).then(function(e){t.taskbar=$(e),t.tasklist=t.taskbar.find("ul"),$(document.body).append(t.taskbar),t.taskbar.on("click","li",async function(){const o=$(this),a=o.attr("data-module"),d=o.attr("data-uuid"),y=await app.require(a);return o.hasClass("active")?y.minimize(d):(r(),y.load(d),n.toggleNew(d,!1),n.tasklist.removeClass("active"),o.addClass("active")),!1})}),$(window).on("action:app.loggedOut",function(){n.closeAll()})},n.close=async function(t,e){const o=n.tasklist.find('[data-module="'+h+'"][data-uuid="'+e+'"]');let a="close";if(t==="chat"&&(a="closeByUUID"),o.length){const d=await app.require(t);d&&typeof d[a]=="function"&&d[a](e)}},n.closeAll=function(t){let e="[data-uuid]";t&&(e='[data-module="'+t+'"]'+e),n.tasklist.find(e).each(function(o,a){n.close(t||a.getAttribute("data-module"),a.getAttribute("data-uuid"))})},n.discard=function(t,e){n.tasklist.find('[data-module="'+t+'"][data-uuid="'+e+'"]').remove(),i()},n.push=function(t,e,o,a){a=a||function(){};const d=n.tasklist.find('li[data-uuid="'+e+'"]'),y={module:t,uuid:e,options:o,element:d};m.fire("filter:taskbar.push",y),!d.length&&y.module?s(y,a):a(d)},n.get=function(t){return $('[data-module="'+t+'"]').map(function(o,a){return $(a).data()})},n.minimize=function(t,e){n.tasklist.find('[data-module="'+t+'"][data-uuid="'+e+'"]').toggleClass("active",!1)},n.toggleNew=function(t,e,o){n.tasklist.find('[data-uuid="'+t+'"]').toggleClass("new",e),o||m.fire("action:taskbar.toggleNew",t)},n.updateActive=function(t){const e=n.tasklist.find("li");e.removeClass("active"),e.filter('[data-uuid="'+t+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+t+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},n.isActive=function(t){return n.tasklist.find('li[data-uuid="'+t+'"]').hasClass("active")};function i(){n.tasklist.find("li").length>0?n.taskbar.attr("data-active","1"):n.taskbar.removeAttr("data-active")}function r(){n.tasklist.find(".active").removeClass("active")}function s(t,e){f.translate(t.options.title,function(o){const a=$("<div></div>").text(o||"NodeBB Task").html(),d=$("<li></li>").addClass(t.options.className).html('<a href="#"'+(t.options.image?` style="background-image: url('`+t.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(t.options.icon?'<i class="fa '+t.options.icon+'"></i> ':"")+'<span aria-label="'+a+'" component="taskbar/title">'+a+"</span></a>").attr({title:a,"data-module":t.module,"data-uuid":t.uuid}).addClass(t.options.state!==void 0?t.options.state:"active");(!t.options.state||t.options.state==="active")&&r(),n.tasklist.append(d),i(),t.element=d,d.data(t),m.fire("action:taskbar.pushed",t),e(d)})}const l=function(t,e,o){switch(e){case"title":t.find('[component="taskbar/title"]').text(o);break;case"icon":t.find("i").attr("class","fa fa-"+o);break;case"image":t.find("a").css("background-image",o?'url("'+o.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":t.find("a").css("background-color",o);break}};return n.update=function(t,e,o){const a=n.tasklist.find('[data-module="'+t+'"][data-uuid="'+e+'"]');if(!a.length)return;const d=a.data();Object.keys(o).forEach(function(y){d[y]=o[y],l(a,y,o[y])}),a.data(d)},n}.apply(C,p),u!==void 0&&(h.exports=u)}}]);
