(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[71,6503,8786,9986],{7237:(A,k,g)=>{"use strict";var m;m=function(){const d={};return d.core={"topic/teaser":function(e){return e?$('[component="category/topic"][data-tid="'+e+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(e,i){return $('[component="topic"][data-'+e+'="'+i+'"]')},post:function(e,i){return $('[component="post"][data-'+e+'="'+i+'"]')},"post/content":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/content"]')},"post/header":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/header"]')},"post/anchor":function(e){return $('[component="post"][data-index="'+e+'"] [component="post/anchor"]')},"post/vote-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/vote-count"]')},"post/bookmark-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/bookmark-count"]')},"user/postcount":function(e){return $('[component="user/postcount"][data-uid="'+e+'"]')},"user/reputation":function(e){return $('[component="user/reputation"][data-uid="'+e+'"]')},"category/topic":function(e,i){return $('[component="category/topic"][data-'+e+'="'+i+'"]')},"categories/category":function(e,i){return $('[component="categories/category"][data-'+e+'="'+i+'"]')},"chat/message":function(e){return $('[component="chat/message"][data-mid="'+e+'"]')},"chat/message/body":function(e){return $('[component="chat/message"][data-mid="'+e+'"] [component="chat/message/body"]')},"chat/recent/room":function(e){return $('[component="chat/recent/room"][data-roomid="'+e+'"]')}},d.get=function(){const e=Array.prototype.slice.call(arguments,1);return d.core[arguments[0]]&&e.length?d.core[arguments[0]].apply(this,e):$('[component="'+arguments[0]+'"]')},d}.call(k,g,k,A),m!==void 0&&(A.exports=m)},69986:(A,k,g)=>{"use strict";var m,d;m=[g(32230),g(7237),g(42840),g(16943),g(85233),g(7927)],d=function(e,i,C,b,h,u){const a={};let s={};const B=({notifications:o})=>new Promise(r=>{e.toggleTimeagoShorthand(function(){for(let c=0;c<o.length;c+=1)o[c].timeago=$.timeago(new Date(parseInt(o[c].datetime,10)));e.toggleTimeagoShorthand(),r({notifications:o})})});h.on("filter:notifications.load",B),a.loadNotifications=function(o,r){r=r||function(){},socket.emit("notifications.get",null,function(c,l){if(c)return u.error(c);const D=l.unread.concat(l.read).sort(function(S,R){return parseInt(S.datetime,10)>parseInt(R.datetime,10)?-1:1});h.fire("filter:notifications.load",{notifications:D}).then(({notifications:S})=>{app.parseAndTranslate("partials/notifications_list",{notifications:S},function(R){o.html(R),o.off("click").on("click","[data-nid]",function(y){const T=$(this);if(P(T)&&(y.stopPropagation(),y.preventDefault(),i.get("notifications/list").dropdown("toggle")),!T.hasClass("unread"))return;const M=T.attr("data-nid");p(M,!0)}),i.get("notifications").on("click",".mark-all-read",a.markAllRead),o.on("click",".mark-read",function(){const y=$(this).parents("li"),T=y.hasClass("unread"),_=y.attr("data-nid");return p(_,T,function(){y.toggleClass("unread")}),!1}),h.fire("action:notifications.loaded",{notifications:D,list:o}),r()})})})},a.onNewNotification=function(o){ajaxify.currentPage==="notifications"&&ajaxify.refresh(),socket.emit("notifications.getCount",function(r,c){if(r)return u.error(r);a.updateNotifCount(c)}),s[o.nid]||(s[o.nid]=!0)};function p(o,r,c){socket.emit("notifications.mark"+(r?"Read":"Unread"),o,function(l){if(l)return u.error(l);r&&s[o]&&delete s[o],c&&c()})}function P(o){const r=o.attr("data-pid"),c=o.attr("data-path"),l=i.get("post","pid",r);return c.startsWith(config.relative_path+"/post/")&&r&&l.length&&ajaxify.data.template.topic?(C.scrollToIndex(l.attr("data-index"),!0),!0):!1}return a.updateNotifCount=function(o){const r=i.get("notifications/icon");o=Math.max(0,o),o>0?r.removeClass("fa-bell-o").addClass("fa-bell"):r.removeClass("fa-bell").addClass("fa-bell-o"),r.toggleClass("unread-count",o>0),r.attr("data-content",o>99?"99+":o);const c={count:o,updateFavicon:!0};h.fire("action:notification.updateCount",c),c.updateFavicon&&b.setBubble(o>99?"99+":o),C.setAppBadge&&C.setAppBadge(o)},a.markAllRead=function(){socket.emit("notifications.markAllRead",function(o){o&&u.error(o),s={}})},a}.apply(k,m),d!==void 0&&(A.exports=d)},16943:(A,k,g)=>{var m,d;/*!
* Tinycon - A small library for manipulating the Favicon
* Tom Moor, http://tommoor.com
* Copyright (c) 2015 Tom Moor
* @license MIT Licensed
*/(function(){var e={},i=null,C=null,b=null,h=null,u={},a=Math.ceil(window.devicePixelRatio)||1,s=16*a,B={width:7,height:9,font:10*a+"px arial",color:"#ffffff",background:"#F03D25",fallback:!0,crossOrigin:!0,abbreviate:!0},p=function(){var t=navigator.userAgent.toLowerCase();return function(n){return t.indexOf(n)!==-1}}(),P={ie:p("trident"),chrome:p("chrome"),webkit:p("chrome")||p("safari"),safari:p("safari")&&!p("chrome"),mozilla:p("mozilla")&&!p("chrome")&&!p("safari")},o=function(){for(var t=document.getElementsByTagName("link"),n=0,f=t.length;n<f;n++)if((t[n].getAttribute("rel")||"").match(/\bicon\b/i))return t[n];return!1},r=function(){for(var t=document.getElementsByTagName("link"),n=0,f=t.length;n<f;n++){var w=typeof t[n]<"u";w&&(t[n].getAttribute("rel")||"").match(/\bicon\b/i)&&t[n].parentNode.removeChild(t[n])}},c=function(){if(!C||!i){var t=o();i=t?t.getAttribute("href"):"/favicon.ico",C||(C=i)}return i},l=function(){return h||(h=document.createElement("canvas"),h.width=s,h.height=s),h},D=function(t){if(t){r();var n=document.createElement("link");n.type="image/x-icon",n.rel="icon",n.href=t,document.getElementsByTagName("head")[0].appendChild(n)}},S=function(t){window.console&&window.console.log(t)},R=function(t,w){if(!l().getContext||P.ie||P.safari||u.fallback==="force")return y(t);var f=l().getContext("2d"),w=w||"#000000",O=c();b=document.createElement("img"),b.onload=function(){f.clearRect(0,0,s,s),f.drawImage(b,0,0,b.width,b.height,0,0,s,s),(t+"").length>0&&T(f,t,w),_()},!O.match(/^data/)&&u.crossOrigin&&(b.crossOrigin="anonymous"),b.src=O},y=function(t){if(u.fallback){var n=document.title;n[0]==="("&&(n=n.slice(n.indexOf(" "))),(t+"").length>0?document.title="("+t+") "+n:document.title=n}},T=function(t,n,f){typeof n=="number"&&n>99&&u.abbreviate&&(n=M(n));var w=(n+"").length-1,O=u.width*a+6*a*w,K=u.height*a,I=s-K,N=s-O-a,E=16*a,F=16*a,v=2*a;t.font=(P.webkit?"bold ":"")+u.font,t.fillStyle=u.background,t.strokeStyle=u.background,t.lineWidth=a,t.beginPath(),t.moveTo(N+v,I),t.quadraticCurveTo(N,I,N,I+v),t.lineTo(N,E-v),t.quadraticCurveTo(N,E,N+v,E),t.lineTo(F-v,E),t.quadraticCurveTo(F,E,F,E-v),t.lineTo(F,I+v),t.quadraticCurveTo(F,I,F-v,I),t.closePath(),t.fill(),t.beginPath(),t.strokeStyle="rgba(0,0,0,0.3)",t.moveTo(N+v/2,E),t.lineTo(F-v/2,E),t.stroke(),t.fillStyle=u.color,t.textAlign="right",t.textBaseline="top",t.fillText(n,a===2?29:15,P.mozilla?7*a:6*a)},_=function(){l().getContext&&D(l().toDataURL())},M=function(t){for(var n=[["G",1e9],["M",1e6],["k",1e3]],f=0;f<n.length;++f)if(t>=n[f][1]){t=W(t/n[f][1])+n[f][0];break}return t},W=function(t,n){var f=new Number(t);return f.toFixed(n)};e.setOptions=function(t){u={},t.colour&&(t.color=t.colour);for(var n in B)u[n]=t.hasOwnProperty(n)?t[n]:B[n];return this},e.setImage=function(t){return i=t,_(),this},e.setBubble=function(t,n){return t=t||"",R(t,n),this},e.reset=function(){i=C,D(C)},e.setOptions(B),m=e,d=typeof m=="function"?m.call(k,g,k,A):m,d!==void 0&&(A.exports=d)})()}}]);
