"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[9789,2160,1018],{81018:(f,d,t)=>{var i,c;i=[t(7927)],c=function(p){const r={};r.init=function(){Promise.all([t.e(2441),t.e(4074),t.e(3216),t.e(524),t.e(8596)]).then(function(){var o=[t(30524)];(function(a){$('[component="chat/recent"]').on("click",'[component="chat/recent/room"]',function(){a.switchChat($(this).attr("data-roomid"))}),$('[component="chat/recent"]').on("scroll",function(){const e=$(this),m=(e[0].scrollHeight-e.height())*.9;e.scrollTop()>m&&h()})}).apply(null,o)}).catch(t.oe)};function h(){const o=$('[component="chat/recent"]');o.attr("loading")||(o.attr("loading",1),socket.emit("modules.chats.getRecentChats",{uid:ajaxify.data.uid,after:o.attr("data-nextstart")},function(a,e){if(a)return p.error(a);e&&e.rooms.length?E(e,function(){o.removeAttr("loading"),o.attr("data-nextstart",e.nextStart)}):o.removeAttr("loading")}))}function E(o,a){if(!o.rooms.length)return a();app.parseAndTranslate("chats","rooms",o,function(e){$('[component="chat/recent"]').append(e),e.find(".timeago").timeago(),a()})}return r}.apply(d,i),c!==void 0&&(f.exports=c)},18596:(f,d,t)=>{var i,c;i=[t(7237),t(74344),t(7927)],c=function(p,r,h){const E={};E.init=function(){p.get("chat/search").on("keyup",utils.debounce(o,250))};function o(){const s=p.get("chat/search").val();if(!s)return $('[component="chat/search/list"]').empty();r.get("/api/users",{query:s,searchBy:"username",paginate:!1}).then(a).catch(h.error)}function a(s){const n=$('[component="chat/search/list"]');if(n.empty(),s.users=s.users.filter(function(l){return parseInt(l.uid,10)!==parseInt(app.user.uid,10)}),!s.users.length)return n.translateHtml("<li><div><span>[[users:no-users-found]]</span></div></li>");s.users.forEach(function(l){const u=e(n,l);m(u,l)}),n.parent().toggleClass("open",!0)}function e(s,n){function l(){return(n.picture?'<img src="'+n.picture+'" title="'+n.username+'" />':'<div class="user-icon" style="background-color: '+n["icon:bgColor"]+'">'+n["icon:text"]+"</div>")+'<i class="fa fa-circle status '+n.status+'"></i> '+n.username}const u=$('<li component="chat/search/user"></li>').attr("data-uid",n.uid).appendTo(s);return u.append(l()),u}function m(s,n){s.on("click",function(){socket.emit("modules.chats.hasPrivateChat",n.uid,function(l,u){if(l)return h.error(l);u?Promise.all([t.e(2441),t.e(4074),t.e(3216),t.e(524),t.e(1018)]).then(function(){var g=[t(30524)];(function(A){A.switchChat(u)}).apply(null,g)}).catch(t.oe):t.e(3216).then(function(){var g=[t(93216)];(function(A){A.newChat(n.uid)}).apply(null,g)}).catch(t.oe)})})}return E}.apply(d,i),c!==void 0&&(f.exports=c)},75203:(f,d,t)=>{var i;i=function(){const c={};return c.apply=function(p){$(p).on("mousewheel",function(r){const h=this.scrollTop,E=this.scrollHeight,o=Math.round(this.getBoundingClientRect().height);if(r.originalEvent.deltaY<0&&h===0||r.originalEvent.deltaY>0&&o+h>=E)return!1})},c}.call(d,t,d,f),i!==void 0&&(f.exports=i)}}]);
