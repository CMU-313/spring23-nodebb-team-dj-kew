(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[5482,2735,882,3034],{45482:(x,b,f)=>{"use strict";var m,p;m=[f(83713),f(38259),f(62023),f(10577)],p=function(k,n,s,e){var l={},u={picture:function(){var a=this;a.find("#files").click()},upload:function(){var a=this;a.find("#files").click()},thumbs:function(){l.exitFullscreen();var a=this;Promise.all([f.e(4074),f.e(2143),f.e(1521),f.e(7913)]).then(function(){var t=[f(44541)];(function(o){const i=a.get(0).getAttribute("data-uuid"),r=o.posts[i];(r.action==="topics.post"||r.action==="posts.edit"&&r.isMain)&&s.modal.open({id:i,pid:r.pid}).then(()=>{a.trigger("thumb.uploaded"),o.updateThumbCount(i,a)})}).apply(null,t)}).catch(f.oe)},tags:function(){var a=this;a.find(".tags-container").toggleClass("hidden")},zen:function(){var a=this;$(window).one("resize",function(){function t(){e.isFullscreen||(app.toggleNavbar(!0),$("html").removeClass("zen-mode"),n.reposition(a),$(window).off("resize",t))}e.isFullscreen&&(app.toggleNavbar(!1),$("html").addClass("zen-mode"),a.find(".write").focus(),$(window).on("resize",t),$(window).one("action:composer.topics.post action:composer.posts.reply action:composer.posts.edit action:composer.discard",e.exit))}),e.toggle(a.get(0)),$(window).trigger("action:composer.fullscreen",{postContainer:a})}},d=[];return l.exitFullscreen=function(){e.isEnabled&&e.isFullscreen&&e.exit()},l.addComposerButtons=function(){for(var a=0,t=d.length;a<t;a++)$(".formatting-bar .formatting-group #fileForm").before('<li tabindex="-1" data-format="'+d[a].name+'" title="'+(d[a].title||"")+'"><i class="'+d[a].iconClass+'"></i></li>')},l.addButton=function(a,t,o,i){i=i||a.replace("fa fa-",""),u[i]=t,d.push({name:i,iconClass:a,title:o})},l.getDispatchTable=function(){return u},l.addButtonDispatch=function(a,t){u[a]=t},l.addHandler=function(a){a.on("click",".formatting-bar li",function(t){var o=$(this).attr("data-format"),i=$(this).parents('[component="composer"]').find("textarea")[0];u.hasOwnProperty(o)&&(u[o].call(a,i,i.selectionStart,i.selectionEnd,t),k.render(a))})},l}.apply(b,m),p!==void 0&&(x.exports=p)},83713:(x,b,f)=>{"use strict";var m,p;m=[f(85233)],p=function(k){var n={};return n.render=function(s,e){if(e=e||function(){},!s.find(".preview-container").is(":visible"))return e();var l=s.find("textarea");socket.emit("plugins.composer.renderPreview",l.val(),function(u,d){u||(d=$("<div>"+d+"</div>"),d.find("img:not(.not-responsive)").addClass("img-responsive"),s.find(".preview").html(d),k.fire("action:composer.preview"),e())})},n.matchScroll=function(s){if(s.find(".preview-container").is(":visible")){var e=s.find("textarea"),l=s.find(".preview");if(e.length&&l.length){var u=e[0].scrollHeight-e.height();if(u===0)return;var d=e.scrollTop()/u;l.scrollTop(Math.max(l[0].scrollHeight-l.height(),0)*d)}}},n.handleToggler=function(s){n.env=utils.findBootstrapEnvironment();var e=s.find(".write-container .toggle-preview"),l=s.find(".preview-container .toggle-preview"),u=$(".preview-container"),d=$(".write-container");function a(){o(!1),n.env!=="xs"&&n.env!=="sm"&&localStorage.setItem("composer:previewToggled",!0)}function t(){o(!0),n.env!=="xs"&&n.env!=="sm"&&localStorage.removeItem("composer:previewToggled")}function o(i){n.env==="xs"||n.env==="sm"?(u.toggleClass("hide",!1),d.toggleClass("maximized",!1),e.toggleClass("hide",!0),u.toggleClass("hidden-xs hidden-sm",!i),d.toggleClass("hidden-xs hidden-sm",i),i&&n.render(s)):(u.toggleClass("hide",!i),d.toggleClass("maximized",!i),e.toggleClass("hide",i)),n.matchScroll(s)}n.toggle=o,l.on("click",function(){a(),s.find(".write").focus()}),e.on("click",function(){t(),s.find(".write").focus()}),localStorage.getItem("composer:previewToggled")||n.env==="xs"||n.env==="sm"?a():t()},n}.apply(b,m),p!==void 0&&(x.exports=p)},38259:(x,b,f)=>{"use strict";var m,p;m=[f(27145)],p=function(k){var n={},s=0,e=.3,l=.05,u=992,d=$("body"),a=$(window),t=$('[component="navbar"]'),o=document.body,i=t[0];function r(){return localStorage.getItem("composer:resizeRatio")||.5}function g(c){localStorage.setItem("composer:resizeRatio",Math.min(c,1))}function E(){var c;i?c=i.getBoundingClientRect():c={bottom:0};var v=Math.max(c.bottom,0),h={top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};return h.width=h.right,h.height=h.bottom,h.boundedTop=v,h.boundedHeight=h.bottom-v,h}function N(c,v){var h=E(),z=c[0],y=window.getComputedStyle(z),P=parseInt(y.getPropertyValue("min-height"),10),D=Math.max(P/window.innerHeight,e);if(h.width>=u){const M=(h.height-h.boundedHeight)/h.height;v=Math.min(Math.max(v,D+M),1);var S=v*h.boundedHeight/h.height;z.style.top=((1-S)*100).toString()+"%";var R=z.getBoundingClientRect();o.style.paddingBottom=(R.bottom-R.top).toString()+"px"}else c.removeAttr("style"),o.style.paddingBottom=0;c.ratio=v,z.style.visibility="visible",k.updateActive(c.attr("data-uuid"))}var C=N,I=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return I&&(C=function(c,v){I(function(){N(c,v),setTimeout(function(){a.trigger("action:composer.resize"),c.trigger("action:composer.resize")},0)})}),n.reposition=function(c){var v=r();v>=1-l&&(v=1,c.addClass("maximized")),C(c,v)},n.maximize=function(c,v){v?C(c,1):n.reposition(c)},n.handleResize=function(c){var v=0,h=0,z=0,y=c.find(".resizer"),P=y[0];function D(w){var B=P.getBoundingClientRect(),F=(B.top+B.bottom)/2;v=(F-w.clientY)/2,h=w.clientY,a.on("mousemove",S),a.on("mouseup",R),d.on("touchmove",M)}function S(w){var B=w.clientY-v,F=E(),A=(F.height-B)/F.boundedHeight;C(c,A)}function R(w){w.preventDefault(),z=w.clientY,c.find("textarea").focus(),a.off("mousemove",S),a.off("mouseup",R),d.off("touchmove",M);var B=z-v,F=E(),A=(F.height-B)/F.boundedHeight;z-h===0&&c.hasClass("maximized")?(c.removeClass("maximized"),A=!s||s>=1-l?.5:s,C(c,A)):z-h===0||A>=1-l?(C(c,1),c.addClass("maximized"),s=A):c.removeClass("maximized"),g(A)}function M(w){w.preventDefault(),S(w.touches[0])}y.on("mousedown",function(w){w.preventDefault(),D(w)}).on("touchstart",function(w){w.preventDefault(),D(w.touches[0])}).on("touchend",R)},n}.apply(b,m),p!==void 0&&(x.exports=p)},27145:(x,b,f)=>{"use strict";x=f.nmd(x);var m,p;m=[f(59006),f(32230),f(85233)],p=function(k,n,s){const e={};e.init=function(){const t=this;k.render("modules/taskbar",{}).then(function(o){t.taskbar=$(o),t.tasklist=t.taskbar.find("ul"),$(document.body).append(t.taskbar),t.taskbar.on("click","li",async function(){const i=$(this),r=i.attr("data-module"),g=i.attr("data-uuid"),E=await app.require(r);return i.hasClass("active")?E.minimize(g):(u(),E.load(g),e.toggleNew(g,!1),e.tasklist.removeClass("active"),i.addClass("active")),!1})}),$(window).on("action:app.loggedOut",function(){e.closeAll()})},e.close=async function(t,o){const i=e.tasklist.find('[data-module="'+x+'"][data-uuid="'+o+'"]');let r="close";if(t==="chat"&&(r="closeByUUID"),i.length){const g=await app.require(t);g&&typeof g[r]=="function"&&g[r](o)}},e.closeAll=function(t){let o="[data-uuid]";t&&(o='[data-module="'+t+'"]'+o),e.tasklist.find(o).each(function(i,r){e.close(t||r.getAttribute("data-module"),r.getAttribute("data-uuid"))})},e.discard=function(t,o){e.tasklist.find('[data-module="'+t+'"][data-uuid="'+o+'"]').remove(),l()},e.push=function(t,o,i,r){r=r||function(){};const g=e.tasklist.find('li[data-uuid="'+o+'"]'),E={module:t,uuid:o,options:i,element:g};s.fire("filter:taskbar.push",E),!g.length&&E.module?d(E,r):r(g)},e.get=function(t){return $('[data-module="'+t+'"]').map(function(i,r){return $(r).data()})},e.minimize=function(t,o){e.tasklist.find('[data-module="'+t+'"][data-uuid="'+o+'"]').toggleClass("active",!1)},e.toggleNew=function(t,o,i){e.tasklist.find('[data-uuid="'+t+'"]').toggleClass("new",o),i||s.fire("action:taskbar.toggleNew",t)},e.updateActive=function(t){const o=e.tasklist.find("li");o.removeClass("active"),o.filter('[data-uuid="'+t+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+t+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},e.isActive=function(t){return e.tasklist.find('li[data-uuid="'+t+'"]').hasClass("active")};function l(){e.tasklist.find("li").length>0?e.taskbar.attr("data-active","1"):e.taskbar.removeAttr("data-active")}function u(){e.tasklist.find(".active").removeClass("active")}function d(t,o){n.translate(t.options.title,function(i){const r=$("<div></div>").text(i||"NodeBB Task").html(),g=$("<li></li>").addClass(t.options.className).html('<a href="#"'+(t.options.image?` style="background-image: url('`+t.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(t.options.icon?'<i class="fa '+t.options.icon+'"></i> ':"")+'<span aria-label="'+r+'" component="taskbar/title">'+r+"</span></a>").attr({title:r,"data-module":t.module,"data-uuid":t.uuid}).addClass(t.options.state!==void 0?t.options.state:"active");(!t.options.state||t.options.state==="active")&&u(),e.tasklist.append(g),l(),t.element=g,g.data(t),s.fire("action:taskbar.pushed",t),o(g)})}const a=function(t,o,i){switch(o){case"title":t.find('[component="taskbar/title"]').text(i);break;case"icon":t.find("i").attr("class","fa fa-"+i);break;case"image":t.find("a").css("background-image",i?'url("'+i.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":t.find("a").css("background-color",i);break}};return e.update=function(t,o,i){const r=e.tasklist.find('[data-module="'+t+'"][data-uuid="'+o+'"]');if(!r.length)return;const g=r.data();Object.keys(i).forEach(function(E){g[E]=i[E],a(r,E,i[E])}),r.data(g)},e}.apply(b,m),p!==void 0&&(x.exports=p)},10577:x=>{/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/(function(){"use strict";var b=typeof window<"u"&&typeof window.document<"u"?window.document:{},f=x.exports,m=function(){for(var n,s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],e=0,l=s.length,u={};e<l;e++)if(n=s[e],n&&n[1]in b){for(e=0;e<n.length;e++)u[s[0][e]]=n[e];return u}return!1}(),p={change:m.fullscreenchange,error:m.fullscreenerror},k={request:function(n,s){return new Promise(function(e,l){var u=function(){this.off("change",u),e()}.bind(this);this.on("change",u),n=n||b.documentElement;var d=n[m.requestFullscreen](s);d instanceof Promise&&d.then(u).catch(l)}.bind(this))},exit:function(){return new Promise(function(n,s){if(!this.isFullscreen){n();return}var e=function(){this.off("change",e),n()}.bind(this);this.on("change",e);var l=b[m.exitFullscreen]();l instanceof Promise&&l.then(e).catch(s)}.bind(this))},toggle:function(n,s){return this.isFullscreen?this.exit():this.request(n,s)},onchange:function(n){this.on("change",n)},onerror:function(n){this.on("error",n)},on:function(n,s){var e=p[n];e&&b.addEventListener(e,s,!1)},off:function(n,s){var e=p[n];e&&b.removeEventListener(e,s,!1)},raw:m};if(!m){f?x.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(k,{isFullscreen:{get:function(){return Boolean(b[m.fullscreenElement])}},element:{enumerable:!0,get:function(){return b[m.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(b[m.fullscreenEnabled])}}}),f?x.exports=k:window.screenfull=k})()}}]);
